!function(t,e){"function"==typeof define&&define.amd?define([],e):t.BB=e()}(this,function(){var t,e,n;return function(i){function r(t,e){return b.call(t,e)}function o(t,e){var n,i,r,o,s,a,c,u,h,l,p,f=e&&e.split("/"),d=v.map,m=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),s=t.length-1,v.nodeIdCompat&&x.test(t[s])&&(t[s]=t[s].replace(x,"")),t=f.slice(0,f.length-1).concat(t),h=0;h<t.length;h+=1)if(p=t[h],"."===p)t.splice(h,1),h-=1;else if(".."===p){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&d){for(n=t.split("/"),h=n.length;h>0;h-=1){if(i=n.slice(0,h).join("/"),f)for(l=f.length;l>0;l-=1)if(r=d[f.slice(0,l).join("/")],r&&(r=r[i])){o=r,a=h;break}if(o)break;!c&&m&&m[i]&&(c=m[i],u=h)}!o&&c&&(o=c,a=u),o&&(n.splice(0,a,o),t=n.join("/"))}return t}function s(t,e){return function(){var n=B.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),f.apply(i,n.concat([t,e]))}}function a(t){return function(e){return o(e,t)}}function c(t){return function(e){y[t]=e}}function u(t){if(r(g,t)){var e=g[t];delete g[t],w[t]=!0,p.apply(i,e)}if(!r(y,t)&&!r(w,t))throw new Error("No "+t);return y[t]}function h(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function l(t){return function(){return v&&v.config&&v.config[t]||{}}}var p,f,d,m,y={},g={},v={},w={},b=Object.prototype.hasOwnProperty,B=[].slice,x=/\.js$/;d=function(t,e){var n,i=h(t),r=i[0];return t=i[1],r&&(r=o(r,e),n=u(r)),r?t=n&&n.normalize?n.normalize(t,a(e)):o(t,e):(t=o(t,e),i=h(t),r=i[0],t=i[1],r&&(n=u(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},m={require:function(t){return s(t)},exports:function(t){var e=y[t];return"undefined"!=typeof e?e:y[t]={}},module:function(t){return{id:t,uri:"",exports:y[t],config:l(t)}}},p=function(t,e,n,o){var a,h,l,p,f,v,b=[],B=typeof n;if(o=o||t,"undefined"===B||"function"===B){for(e=!e.length&&n.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(p=d(e[f],o),h=p.f,"require"===h)b[f]=m.require(t);else if("exports"===h)b[f]=m.exports(t),v=!0;else if("module"===h)a=b[f]=m.module(t);else if(r(y,h)||r(g,h)||r(w,h))b[f]=u(h);else if(p.p)p.p.load(p.n,s(o,!0),c(h),{}),b[f]=y[h];else if("BB.LeapMotion"!==t)throw new Error(t+" missing "+h);l=n?n.apply(y[t],b):void 0,t&&(a&&a.exports!==i&&a.exports!==y[t]?y[t]=a.exports:l===i&&v||(y[t]=l))}else t&&(y[t]=n)},t=e=f=function(t,e,n,r,o){if("string"==typeof t)return m[t]?m[t](e):u(d(t,e).f);if(!t.splice){if(v=t,v.deps&&f(v.deps,v.callback),!e)return;e.splice?(t=e,e=n,n=null):t=i}return e=e||function(){},"function"==typeof n&&(n=r,r=o),r?p(i,t,e,n):setTimeout(function(){p(i,t,e,n)},4),f},f.config=function(t){return f(t)},t._defined=y,n=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),r(y,t)||r(g,t)||(g[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("../node_modules/almond/almond",function(){}),n("BB",[],function(){"use strict";function t(){}return t}),n("BB.Vector2",["./BB"],function(t){"use strict";return t.Vector2=function(t,e){this.x=t||0,this.y=e||0},t.Vector2.prototype={constructor:t.Vector2,set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("BB.Vector2.setComponent: index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("BB.Vector2.getComponent: index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e}else this.x=0,this.y=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(){var e,n;return function(i,r){return void 0===e&&(e=new t.Vector2,n=new t.Vector2),e.set(i,i),n.set(r,r),this.clamp(e,n)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},clone:function(){return new t.Vector2(this.x,this.y)}},t.Vector2}),n("BB.MathUtils",["./BB","./BB.Vector2"],function(t,e){"use strict";return t.Vector2=e,t.MathUtils=function(){},t.MathUtils.norm=function(t,e,n){if("number"!=typeof t)throw new Error("BB.MathUtils.norm: value is not a number type");if("number"!=typeof e)throw new Error("BB.MathUtils.norm: min is not a number type");if("number"!=typeof n)throw new Error("BB.MathUtils.norm: max is not a number type");return(t-e)/(n-e)},t.MathUtils.lerp=function(t,e,n){if("number"!=typeof t)throw new Error("BB.MathUtils.lerp: norm is not a number type");if("number"!=typeof e)throw new Error("BB.MathUtils.lerp: min is not a number type");if("number"!=typeof n)throw new Error("BB.MathUtils.lerp: max is not a number type");return(n-e)*t+e},t.MathUtils.clamp=function(t,e,n){if("number"!=typeof t)throw new Error("BB.MathUtils.clamp: norm is not a number type");if("number"!=typeof e)throw new Error("BB.MathUtils.clamp: min is not a number type");if("number"!=typeof n)throw new Error("BB.MathUtils.clamp: max is not a number type");return Math.max(e,Math.min(n,t))},t.MathUtils.map=function(t,e,n,i,r){if("number"!=typeof t)throw new Error("BB.MathUtils.map: value is not a number type");if("number"!=typeof e)throw new Error("BB.MathUtils.map: sourceMin is not a number type");if("number"!=typeof n)throw new Error("BB.MathUtils.map: sourceMax is not a number type");if("number"!=typeof i)throw new Error("BB.MathUtils.map: destMin is not a number type");if("number"!=typeof r)throw new Error("BB.MathUtils.map: destMax is not a number type");return this.lerp(this.norm(t,e,n),i,r)},t.MathUtils.dist=function(t,e,n,i){if("number"!=typeof t)throw new Error("BB.MathUtils.dist: p1x is not a number type");if("number"!=typeof e)throw new Error("BB.MathUtils.dist: p1y is not a number type");if("number"!=typeof n)throw new Error("BB.MathUtils.dist: p2x is not a number type");if("number"!=typeof i)throw new Error("BB.MathUtils.dist: p2y is not a number type");return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))},t.MathUtils.angleBtw=function(t,e,n,i){if("number"!=typeof t)throw new Error("BB.MathUtils.angleBtwn: p1x is not a number type");if("number"!=typeof e)throw new Error("BB.MathUtils.angleBtwn: p1y is not a number type");if("number"!=typeof n)throw new Error("BB.MathUtils.angleBtwn: p2x is not a number type");if("number"!=typeof i)throw new Error("BB.MathUtils.angleBtwn: p2y is not a number type");return Math.atan2(n-t,i-e)},t.MathUtils.radToDeg=function(t){if("number"!=typeof t)throw new Error("BB.MathUtils.radToDegree: radians is not a number type");return t*(180/Math.PI)},t.MathUtils.degToRad=function(t){if("number"!=typeof t)throw new Error("BB.MathUtils.degToRad: degrees is not a number type");return t*(Math.PI/180)},t.MathUtils.polarToCartesian=function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new Error("BB.MathUtils.polarToCartesian: invalid arguments, function expects two Number type parameters.");return[t*Math.cos(e),t*Math.sin(e)]},t.MathUtils.cartesianToPolar=function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new Error("BB.MathUtils.cartesianToPolar: invalid arguments, function expects two Number type parameters.");return[Math.sqrt(t*t+e*e),Math.atan(e/t)]},t.MathUtils.randomInt=function(t,e){if(0===arguments.length)throw new Error("BB.MathUtils.cartesianToPolar: requires at least one argument");return 1===arguments.length?Math.floor(0+Math.random()*(t-0+1)):Math.floor(t+Math.random()*(e-t+1))},t.MathUtils.randomFloat=function(t,e){if(0===arguments.length)throw new Error("BB.MathUtils.cartesianToPolar: requires at least one argument");return 1===arguments.length?0+Math.random()*(t-0):t+Math.random()*(e-t)},t.MathUtils}),n("BB.Color",["./BB"],function(t){"use strict";return t.Color=function(t,e,n,i){if("undefined"==typeof t)this._r=204;else{if("number"!=typeof t||0>t||t>255)throw new Error("BB.Color: red parameter neeeds to be a NUMBER between 0 - 255");this._r=t}if("undefined"==typeof e)this._g=51;else{if("number"!=typeof e||0>e||e>255)throw new Error("BB.Color: green parameter neeeds to be a NUMBER between 0 - 255");this._g=e}if("undefined"==typeof n)this._b=153;else{if("number"!=typeof n||0>n||n>255)throw new Error("BB.Color: blue parameter neeeds to be a NUMBER between 0 - 255");this._b=n}if("undefined"==typeof i)this._a=255;else{if(0>i||i>255)throw new Error("BB.Color: alpha parameter neeeds to be a NUMBER between 0 - 255");this._a=i}this.rgb2hsv(),this.schemes={monochromatic:[],analogous:[],complementary:[],splitcomplementary:[],triadic:[],tetradic:[],random:[]}},Object.defineProperty(t.Color.prototype,"r",{get:function(){return this._r},set:function(t){if("number"!=typeof t||0>t||t>255)throw new Error("BB.Color: red parameter neeeds to be a NUMBER between 0 - 255");this._r=t,this.rgb2hsv()}}),Object.defineProperty(t.Color.prototype,"g",{get:function(){return this._g},set:function(t){if("number"!=typeof t||0>t||t>255)throw new Error("BB.Color: green parameter neeeds to be a NUMBER between 0 - 255");this._g=t,this.rgb2hsv()}}),Object.defineProperty(t.Color.prototype,"b",{get:function(){return this._b},set:function(t){if("number"!=typeof t||0>t||t>255)throw new Error("BB.Color: blue parameter neeeds to be a NUMBER between 0 - 255");this._b=t,this.rgb2hsv()}}),Object.defineProperty(t.Color.prototype,"a",{get:function(){return this._a},set:function(t){if("number"!=typeof t||0>t||t>255)throw new Error("BB.Color: alpha parameter neeeds to be a NUMBER between 0 - 255");this._a=t,this.rgb2hsv()}}),Object.defineProperty(t.Color.prototype,"h",{get:function(){return this._h},set:function(t){if("number"!=typeof t||0>t||t>359)throw new Error("BB.Color: hue parameter neeeds to be a NUMBER between 0 - 359");this._h=t,this.hsv2rgb()}}),Object.defineProperty(t.Color.prototype,"s",{get:function(){return this._s},set:function(t){if("number"!=typeof t||0>t||t>100)throw new Error("BB.Color: saturation parameter neeeds to be a NUMBER between 0 - 100");this._s=t,this.hsv2rgb()}}),Object.defineProperty(t.Color.prototype,"v",{get:function(){return this._v},set:function(t){if("number"!=typeof t||0>t||t>100)throw new Error("BB.Color: brightness/lightness parameter neeeds to be a NUMBER between 0 - 100");this._v=t,this.hsv2rgb()}}),Object.defineProperty(t.Color.prototype,"rgb",{get:function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},set:function(t){if("string"!=typeof t)throw new Error("BB.Color: rgb parameter expects an rgb(...) string");if(0!==t.indexOf("rgb("))throw new Error("BB.Color: expecting string staring with 'rgb(' ");if(")"!==t[t.length-1])throw new Error("BB.Color: expecting string ending with ')' ");if(t=t.substr(4,t.length-5),t=t.split(","),t.length<3)throw new Error("BB.Color: rgb(...) requires 3 properties");if(t[0]=parseInt(t[0]),t[1]=parseInt(t[1]),t[2]=parseInt(t[2]),t[0]<0||t[0]>255)throw new Error("BB.Color: red value must be between 0 - 255 ");if(t[1]<0||t[1]>255)throw new Error("BB.Color: green value must be between 0 - 255 ");if(t[2]<0||t[2]>255)throw new Error("BB.Color: blue value must be between 0 - 255 ");this.r=t[0],this.g=t[1],this.b=t[2]}}),Object.defineProperty(t.Color.prototype,"rgba",{get:function(){return"rgba("+this.r+", "+this.g+", "+this.b+","+Math.floor(this.a/255*100)/100+")"},set:function(t){if("string"!=typeof t)throw new Error("BB.Color: rgba parameter expects an rgba(...) string");if(0!==t.indexOf("rgba("))throw new Error("BB.Color: expecting string staring with 'rgba(' ");if(")"!==t[t.length-1])throw new Error("BB.Color: expecting string ending with ')' ");if(t=t.substr(5,t.length-6),t=t.split(","),t.length<4)throw new Error("BB.Color: rgba(...) requires 4 properties");if(t[0]=parseInt(t[0]),t[1]=parseInt(t[1]),t[2]=parseInt(t[2]),t[3]=parseFloat(t[3]),t[0]<0||t[0]>255)throw new Error("BB.Color: red value must be between 0 - 255 ");if(t[1]<0||t[1]>255)throw new Error("BB.Color: green value must be between 0 - 255 ");if(t[2]<0||t[2]>255)throw new Error("BB.Color: blue value must be between 0 - 255 ");if(t[3]<0||t[3]>1)throw new Error("BB.Color: alpha value must be between 0.0 - 1.0 ");this.r=t[0],this.g=t[1],this.b=t[2],this.a=Math.floor(255*t[3])}}),Object.defineProperty(t.Color.prototype,"hex",{get:function(){return"#"+(this.r<<16|this.g<<8|this.b).toString(16)},set:function(t){if("string"!=typeof t)throw new Error("BB.Color: hex parameter expects a # string");if(0!==t.indexOf("#"))throw new Error("BB.Color: expecting string staring with '#' ");if(7!==t.length&&4!==t.length)throw new Error("BB.Color: hex string is too long or short ");var e;7===t.length?(t=t.substr(1,t.length-1),e=[t.substr(0,t.length-4),t.substr(2,t.length-4),t.substr(4,t.length-4)],console.log(parseInt("0x"+e[0]),parseInt("0x"+e[1]),parseInt("0x"+e[2])),this.r=parseInt("0x"+e[0]),this.g=parseInt("0x"+e[1]),this.b=parseInt("0x"+e[2])):(t=t.substr(1,t.length-1),e=[t.substr(0,t.length-2),t.substr(1,t.length-2),t.substr(2,t.length-2)],this.r=parseInt("0x"+e[0]+e[0]),this.g=parseInt("0x"+e[1]+e[1]),this.b=parseInt("0x"+e[2]+e[2]))}}),t.Color.prototype.copy=function(e){if("undefined"==typeof e||!(e instanceof t.Color))throw new Error("BB.Color.copy: color parameter is not an instance of BB.Color");return this.setRGBA(e.r,e.g,e.b,e.a),this},t.Color.prototype.clone=function(){var e=new t.Color;return e.copy(this),e},t.Color.prototype.setRGBA=function(t,e,n,i){if("number"!=typeof t||0>t||t>255)throw new Error("BB.Color: red parameter neeeds to be a NUMBER between 0 - 255");if(this.r=t,"number"!=typeof e||0>e||e>255)throw new Error("BB.Color: green parameter neeeds to be a NUMBER between 0 - 255");if(this.g=e,"number"!=typeof n||0>n||n>255)throw new Error("BB.Color: blue parameter neeeds to be a NUMBER between 0 - 255");if(this.b=n,"number"!=typeof i||0>i||i>255)throw new Error("BB.Color: alpha parameter neeeds to be a NUMBER between 0 - 255");return this.a=i,this.rgb2hsv(),this},t.Color.prototype.setHSVA=function(t,e,n,i){if("number"!=typeof t||0>t||t>359)throw new Error("BB.Color: hue parameter neeeds to be a NUMBER between 0 - 359");if(this.h=t,"number"!=typeof e||0>e||e>100)throw new Error("BB.Color: saturation parameter neeeds to be a NUMBER between 0 - 100");if(this.s=e,"number"!=typeof n||0>n||n>100)throw new Error("BB.Color: value parameter neeeds to be a NUMBER between 0 - 100");if(this.v=n,"number"!=typeof i||0>i||i>255)throw new Error("BB.Color: alpha parameter neeeds to be a NUMBER between 0 - 255");return this.a=i,this.hsv2rgb(),this},t.Color.prototype.isEqual=function(e,n){if(!(e&&e instanceof t.Color))throw new Error("BB.Color.isEqual: color parameter is not an instance of BB.Color");return n?this.r===e.r&&this.g===e.g&&this.b===e.b:this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a},t.Color.prototype.min3=function(t,e,n){return e>t?n>t?t:n:n>e?e:n},t.Color.prototype.max3=function(t,e,n){return t>e?t>n?t:n:e>n?e:n},t.Color.prototype.rgb2hsv=function(e,n,i){var r;r="undefined"==typeof e?this:e instanceof t.Color?e:{r:e,g:n,b:i};var o={},s=Math.max(r.r,Math.max(r.g,r.b)),a=s-Math.min(r.r,Math.min(r.g,r.b));return o.s=0===s?0:100*a/s,0===o.s?o.h=0:r.r==s?o.h=60*(r.g-r.b)/a:r.g==s?o.h=120+60*(r.b-r.r)/a:r.b==s&&(o.h=240+60*(r.r-r.g)/a),o.h<0&&(o.h+=360),o.h=Math.round(o.h),o.s=Math.round(o.s),o.v=Math.round(100*s/255),"undefined"==typeof e&&(this._h=o.h,this._s=o.s,this._v=o.v),o},t.Color.prototype.hsv2rgb=function(e,n,i){var r,o;"undefined"==typeof e?(r={r:this.r,g:this.g,b:this.b},o={h:this.h,s:this.s,v:this.v}):(r={},o=e instanceof t.Color?e.clone():{h:e,s:n,v:i}),o.h/=60,o.s/=100,o.v/=100;var s=Math.floor(o.h),a=o.h-s,c=o.v*(1-o.s),u=o.v*(1-o.s*a),h=o.v*(1-o.s*(1-a));switch(s){case 0:r.r=o.v,r.g=h,r.b=c;break;case 1:r.r=u,r.g=o.v,r.b=c;break;case 2:r.r=c,r.g=o.v,r.b=h;break;case 3:r.r=c,r.g=u,r.b=o.v;break;case 4:r.r=h,r.g=c,r.b=o.v;break;default:r.r=o.v,r.g=c,r.b=u}return r.r=Math.round(255*r.r),r.g=Math.round(255*r.g),r.b=Math.round(255*r.b),0===arguments.length&&(this._r=r.r,this._g=r.g,this._b=r.b),r},t.Color.prototype.shift=function(t,e){var n;for(n="undefined"==typeof e?this.h:e,n+=t;n>=360;)n-=360;for(;0>n;)n+=360;return"undefined"==typeof e?(this.h=n,this):n},t.Color.prototype.tint=function(e,n){var i={},r=e;return i.r=Math.round(this.r+(255-this.r)*r),i.g=Math.round(this.g+(255-this.g)*r),i.b=Math.round(this.b+(255-this.b)*r),i.a=this.a,"undefined"!=typeof n&&n===!0?new t.Color(i.r,i.g,i.b,i.a):(this.setRGBA(i.r,i.g,i.b,i.a),this)},t.Color.prototype.shade=function(e,n){var i={},r=e;return i.r=Math.round(this.r*r),i.g=Math.round(this.g*r),i.b=Math.round(this.b*r),i.a=this.a,"undefined"!=typeof n&&n===!0?new t.Color(i.r,i.g,i.b,i.a):(this.setRGBA(i.r,i.g,i.b,i.a),this)},t.Color.prototype.createScheme=function(t,e){if(!(t in this.schemes))throw new Error("BB.Color.createScheme: '"+t+"' is not a valid scheme name, choose from: "+Object.keys(this.schemes));if("object"==typeof e||"undefined"==typeof e){if("undefined"==typeof e&&(e={}),"undefined"==typeof e.angle&&("tetradic"==t?e.angle=40:e.angle=30),"monochromatic"==t){if("undefined"==typeof e.tint)e.tint=[.4,.8];else if(!(e.tint instanceof Array))throw new Error("BB.Color.createScheme: tint should be an Array of floats between 0.0-1.0");if("undefined"==typeof e.shade)e.shade=[.3,.6];else if(!(e.shade instanceof Array))throw new Error("BB.Color.createScheme: shade should be an Array of floats between 0.0-1.0")}"random"==t&&"undefined"==typeof e.count&&(e.count=5)}if("object"!=typeof e)throw new Error("BB.Color.createScheme: config parameter should be an Object");this.schemes[t]=[];var n;switch(t){case"analogous":n=[e.angle,0-e.angle];break;case"complementary":n=[180];break;case"splitcomplementary":n=[180-e.angle,180+e.angle];break;case"triadic":n=[240,120];break;case"tetradic":n=[180,-e.angle,-e.angle+180]}var i=["analogous","complementary","splitcomplementary","triadic","tetradic"],r=["analogous","splitcomplementary","triadic","tetradic"],o=["tetradic"];"monochromatic"==t&&this._schemeVarient(t,e),i.indexOf(t)>=0&&this._schemeVarient(t,e,n[0]),r.indexOf(t)>=0&&this._schemeVarient(t,e,n[1]),o.indexOf(t)>=0&&this._schemeVarient(t,e,n[2]),"random"==t&&this._randomVarients(t,e)},t.Color.prototype._schemeVarient=function(e,n,i){var r,o,s;if("monochromatic"==e?r={r:this.r,g:this.g,b:this.b}:(r={r:this.r,g:this.g,b:this.b},o=this.rgb2hsv(r.r,r.g,r.b),o.h=this.shift(o.h,i),r=this.hsv2rgb(o.h,o.s,o.v)),s=new t.Color(r.r,r.g,r.b),"undefined"!=typeof n.tint){n.tint.sort(function(t,e){return e-t});for(var a=0;a<n.tint.length;a++){var c=s.tint(n.tint[a],!0);this.schemes[e].push(c)}}var u=s.clone();if(this.schemes[e].push(u),"undefined"!=typeof n.shade){n.shade.sort(function(t,e){return e-t});for(var h=0;h<n.shade.length;h++){var l=s.shade(n.shade[h],!0);this.schemes[e].push(l)}}},t.Color.prototype._randomVarients=function(e,n){"undefined"==typeof n.count&&(n.count=5);for(var i=0;i<n.count;i++){var r,o="undefined"==typeof n.hue?Math.floor(360*Math.random()):n.hue,s="undefined"==typeof n.saturation?Math.floor(100*Math.random()):n.saturation,a="undefined"==typeof n.value?Math.floor(100*Math.random()):n.value;r="undefined"!=typeof n.alpha?"random"==n.alpha?Math.floor(255*Math.random()):n.alpha:255;var c=this.hsv2rgb(o,s,a);c.a=r;var u=new t.Color(c.r,c.g,c.b,c.a);this.schemes[e].push(u)}},t.Color}),n("BB.MouseInput",["./BB"],function(t){"use strict";return t.MouseInput=function(e){function n(t){var e=i.canvasElem.getBoundingClientRect();return{x:Math.round((t.clientX-e.left)/(e.right-e.left)*i.canvasElem.width),y:Math.round((t.clientY-e.top)/(e.bottom-e.top)*i.canvasElem.height)}}if("undefined"==typeof e||!(e instanceof HTMLCanvasElement))throw new Error("BB.MouseInput: An HTML5 canvas object must be supplied as a first parameter.");var i=this,r=null;this.x=0,this.y=0,this.clickX=0,this.clickY=0,this.moveDebounce=150,this._isMoving=!1,this._isDown=!1,this.canvasElem=e,this.canvasElem.addEventListener("mousemove",function(t){var e=n(t);i.x=e.x,i.y=e.y,!i.isMoving&&i.hasOwnProperty("_moveStartCallback")&&"function"==typeof i._moveStartCallback&&i._moveStartCallback(i.x,i.y),i._isMoving=!0,clearTimeout(r),r=setTimeout(function(){i.isMoving&&i.hasOwnProperty("_moveStopCallback")&&"function"==typeof i._moveStartCallback&&(i._isMoving=!1,i._moveStopCallback(i.x,i.y))},i.moveDebounce)}),this.canvasElem.addEventListener("mousedown",function(e){e.button===t.MouseInput.LEFT_BUTTON&&(i._isDown=!0,i.hasOwnProperty("_activeStartCallback")&&"function"==typeof i._activeStartCallback&&i._activeStartCallback(i.x,i.y))}),this.canvasElem.addEventListener("mouseup",function(e){e.button===t.MouseInput.LEFT_BUTTON&&(i._isDown=!1,i.hasOwnProperty("_activeStopCallback")&&"function"==typeof i._activeStopCallback&&i._activeStopCallback(i.x,i.y))}),this.canvasElem.addEventListener("click",function(t){var e=n(t);i.clickX=e.x,i.clickY=e.y}),this.canvasElem.addEventListener("mouseleave",function(){i._isDown&&i.hasOwnProperty("_activeStopCallback")&&"function"==typeof i._activeStopCallback&&i._activeStopCallback(i.x,i.y),i.isMoving&&i.hasOwnProperty("_moveStopCallback")&&"function"==typeof i._moveStopCallback&&i._moveStopCallback(i.x,i.y),i._isMoving=!1,i._isDown=!1})},t.MouseInput.LEFT_BUTTON=0,t.MouseInput.SCROLL_BUTTON=1,t.MouseInput.RIGHT_BUTTON=2,Object.defineProperty(t.MouseInput.prototype,"isMoving",{get:function(){return this._isMoving},set:function(t){throw new Error("BB.MouseInput.isMoving (setter): BB.MouseInput.isMoving is a read-only property.")}}),Object.defineProperty(t.MouseInput.prototype,"isDown",{get:function(){return this._isDown},set:function(t){throw new Error("BB.MouseInput.isDown (setter): BB.MouseInput.isDown is a read-only property.")}}),t.MouseInput.prototype.update=function(){this.isMoving&&this.hasOwnProperty("_moveCallback")&&"function"==typeof this._moveCallback&&this._moveCallback(this.x,this.y)},t.MouseInput}),n("BB.Pointer",["./BB","./BB.MouseInput"],function(t,e){"use strict";function n(){this.controllerModule instanceof t.MouseInput&&(this.controllerModule._activeStartCallback=this._activeStartCallback,this.controllerModule._activeStopCallback=this._activeStopCallback,this.controllerModule._moveStartCallback=this._moveStartCallback,this.controllerModule._moveStopCallback=this._moveStopCallback,this.controllerModule._moveCallback=this._moveCallback)}return t.MouseInput=e,t.Pointer=function(e){if("undefined"==typeof e)throw new Error("BB.Pointer: controllerModule parameter is missing from the BB.Pointer constructor.");if(!(e instanceof t.MouseInput))throw this.controllerModule=null,new Error("BB.Pointer.update: controllerModule is not a supported object type.");this.controllerModule=e,this.x=null,this.y=null,this.isMoving=!1,this.isDown=!1,this.hasSelectionInterface=!1,this._activeStartCallback=null,this._activeStopCallback=null,this._moveStartCallback=null,this._moveStopCallback=null,this._moveCallback=null},Object.defineProperty(t.Pointer.prototype,"controllerModule",{get:function(){return this._controllerModule},set:function(t){this._controllerModule=t,n.call(this)}}),t.Pointer.prototype.update=function(){this.controllerModule instanceof t.MouseInput&&(this.x=this.controllerModule.x,this.y=this.controllerModule.y,this.isMoving=this.controllerModule.isMoving,this.isDown=this.controllerModule.isDown,this.hasSelectionInterface=!1)},t.Pointer.prototype.on=function(t,e){if("activestart"==t)this._activeStartCallback=e;else if("activestop"==t)this._activeStopCallback=e;else if("movestart"==t)this._moveStartCallback=e;else if("movestop"==t)this._moveStopCallback=e;else{if("move"!=t)throw new Error("BB.Pointer.on: eventName is not a supported event.");this._moveCallback=e}if(null===this._controllerModule)throw new Error("BB.Pointer.on: pointer has no controller module. You must first call BB.Pointer.update() to assign this pointer a controller module.");n.call(this)},t.Pointer}),n("BB.BrushManager2D",["./BB","./BB.Pointer"],function(t,e){"use strict";return t.Pointer=e,t.BrushManager2D=function(t){var e=this;if("undefined"==typeof t||!(t instanceof HTMLCanvasElement))throw new Error("BB.BrushManager2D: An HTML5 canvas object must be supplied as a first parameter.");if("absolute"!==window.getComputedStyle(t).getPropertyValue("position"))throw new Error("BB.BrushManager2D: the HTML5 canvas passed into the BB.BrushManager2D constructor must be absolutely positioned. Sorry ;).");this._parentCanvas=t,this._parentContext=t.getContext("2d"),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.secondaryCanvas=document.createElement("canvas"),this.secondaryContext=this.secondaryCanvas.getContext("2d"),this._parentCanvas.parentNode.insertBefore(this.secondaryCanvas,this._parentCanvas.nextSibling),this.updateCanvasPosition(),this._numUndos=5,this._history=[],this._purgatory=[],this._fboImage=new Image,this._fboImage.onload=function(){e.secondaryContext.clearRect(0,0,e.canvas.width,e.canvas.height),e.secondaryCanvas.style.display=e._parentCanvas.style.display,e._fboImageLoadWaiting=!1},this._fboImageTemp=null,this._fboImage.onerror=function(t){console.log("BB.BrushManager2D: src failed to load: "+t.target.src)},this._secondaryFboImage=new Image,this._secondaryFboImage.onload=function(){e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.context.drawImage(e._fboImage,0,0),e.context.drawImage(e._secondaryFboImage,0,0),e._history.length===e.numUndos+1&&e._history.shift();var t=e.canvas.toDataURL();e._history.push(t),e._fboImageTemp=e._fboImage.cloneNode(!0),e._fboImageTemp.onload=function(){},e._fboImage.src=t,e.secondaryCanvas.style.display="none",e._parentContext.drawImage(e._secondaryFboImage,0,0),e._fboImageLoadWaiting=!0},this._pointers=[],this._pointerStates=[],this._needsUndo=!1,this._needsRedo=!1,this._somePointersDown=!1,this._fboImageLoadWaiting=!1,this._history.push(this.canvas.toDataURL())},Object.defineProperty(t.BrushManager2D.prototype,"numUndos",{get:function(){return this._numUndos},set:function(t){this._numUndos=t,this._numUndos<this._history.length-1&&this._history.splice(0,this._history.length-this._numUndos-1)}}),t.BrushManager2D.prototype.trackPointers=function(e){if(!(e instanceof Array))throw new Error("BB.BrushManager2D.trackPointers: pointers parameter must be an array of pointers.");for(var n=0;n<e.length;n++){var i=e[n];if(!(i instanceof t.Pointer))throw new Error("BB.BrushManager2D.trackPointers: pointers["+n+"] is not an instance of BB.Pointer.");this._pointers.push(i),this._pointerStates.push(i.isDown)}},t.BrushManager2D.prototype.untrackPointers=function(){this._pointers=[],this._pointerStates=[]},t.BrushManager2D.prototype.untrackPointerAtIndex=function(t){if("undefined"==typeof this._pointers[t])throw new Error("BB.BrushManager2D.untrackPointerAtIndex: Invalid pointer index "+t+". there is no pointer at that index.");this._pointers.splice(t,1),this._pointerStates.splice(t,1)},t.BrushManager2D.prototype.hasPointers=function(){return this._pointers.length>0},t.BrushManager2D.prototype.hasUndo=function(){return this._history.length>1},t.BrushManager2D.prototype.hasRedo=function(){return this._purgatory.length>0},t.BrushManager2D.prototype.update=function(){if(!this.hasPointers())throw new Error("BB.BrushManager2D.update: You must add at least one pointer to the brush manager with BB.BrushManager2D.addPointers(...)");var t=this._pointerStates.some(function(t){return t===!0});this._somePointersDown&&!t&&(this._secondaryFboImage.src=this.secondaryCanvas.toDataURL());for(var e=0;e<this._pointers.length;e++)this._pointerStates[e]=this._pointers[e].isDown;this._somePointersDown=t;var n;this._needsUndo?(this._purgatory.length==this.numUndos+1&&this._purgatory.shift(),this._purgatory.push(this._history.pop()),this._fboImage.src=this._history[this._history.length-1],this._needsUndo=!1):this._needsRedo?this._purgatory.length>0&&(n=this._purgatory.pop(),this._fboImage.src=n,this._history.push(n),this._needsRedo=!1):this._somePointersDown&&this._purgatory.length>0&&(this._purgatory=[])},t.BrushManager2D.prototype.draw=function(t){if("undefined"==typeof t)t=this._parentContext;else if(!(t instanceof CanvasRenderingContext2D))throw new Error("BB.BrushManager2D.draw: context is not an instance of CanvasRenderingContext2D");this._fboImage.complete?t.drawImage(this._fboImage,0,0):null!==this._fboImageTemp&&(t.drawImage(this._fboImageTemp,0,0),this._fboImageLoadWaiting&&t.drawImage(this._secondaryFboImage,0,0))},t.BrushManager2D.prototype.undo=function(){this._history.length>1&&(this._needsUndo=!0)},t.BrushManager2D.prototype.redo=function(){this._history.length>0&&(this._needsRedo=!0)},t.BrushManager2D.prototype.updateCanvasPosition=function(){this.canvas.width=this._parentCanvas.width,this.canvas.height=this._parentCanvas.height,this.secondaryCanvas.width=this.canvas.width,this.secondaryCanvas.height=this.canvas.height;var t=window.getComputedStyle(this._parentCanvas);this.secondaryCanvas.style.position="absolute",this.secondaryCanvas.style.pointerEvents="none",this.secondaryCanvas.style.top=t.getPropertyValue("top"),this.secondaryCanvas.style.right=t.getPropertyValue("right"),this.secondaryCanvas.style.bottom=t.getPropertyValue("bottom"),this.secondaryCanvas.style.left=t.getPropertyValue("left"),this.secondaryCanvas.style.margin=t.getPropertyValue("margin"),this.secondaryCanvas.style.border=t.getPropertyValue("border"),this.secondaryCanvas.style.padding=t.getPropertyValue("padding");var e=t.getPropertyValue("z-index");if(isNaN(e))throw e=0,this.secondaryCanvas.style.zIndex=e+1,new Error('BB.BrushManager2D: the HTML5 canvas passed into the BB.BrushManager2D constructor should have a z-index property value that is numeric. Currently the value is "'+e+'".');e=parseInt(e),this.secondaryCanvas.style.zIndex=e+1;
},t.BrushManager2D}),n("BB.BaseBrush2D",["./BB","./BB.BrushManager2D","./BB.Color"],function(t,e,n){"use strict";return t.BaseBrush2D=e,t.Color=n,t.BaseBrush2D=function(e){this.x=e&&e.x&&"number"==typeof e.x?e.x:0,this.y=e&&e.y&&"number"==typeof e.y?e.y:0,this.width=e&&e.width&&"number"==typeof e.width?e.width:10,this.height=e&&e.height&&"number"==typeof e.height?e.height:10,this.rotation=e&&e.rotation&&"number"==typeof e.rotation?e.rotation:0,this.color=e&&e.color&&e.color instanceof t.Color?e.color:null,this.hidden=e&&e.hidden&&"boolean"==typeof hidden?e.hidden:!1,this.type="base",this.manager=e&&e.manager&&e.manager instanceof t.BrushManager2D?e.manager:null},t.BaseBrush2D.prototype.update=function(t){if(void 0===t)throw new Error("BB.BaseBrush.update: missing controllerModule parameter");if(void 0===t.x||"number"!=typeof t.x)throw new Error("BB.BaseBrush.update: controllerModule parameter does not have a valid x parameter");if(this.x=t.x,void 0===t.y||"number"!=typeof t.y)throw new Error("BB.BaseBrush.update: controllerModule parameter does not have a valid y parameter");this.y=t.y},t.BaseBrush2D.prototype.draw=function(e){if(!e)throw new Error("BB.BaseBrush.draw: Invalid context parameter");var n=e;return this.manager instanceof t.BrushManager2D&&(n=this.manager.secondaryContext),n},t.BaseBrush2D.prototype.scale=function(t){if("number"!=typeof t)throw new Error("BB.BaseBrush2D.scale: scale is not a number type");this.width*=t,this.height*=t},t.BaseBrush2D}),n("BB.ImageBrush2D",["./BB","./BB.BaseBrush2D","./BB.Color","./BB.MathUtils"],function(t,e,n,i){"use strict";t.BaseBrush2D=e,t.Color=n,t.MathUtils=i;var r=!1,o=!1;return t.ImageBrush2D=function(e){if(t.BaseBrush2D.call(this,e),this.type="image",this.variant=null,this._image=null,this._lastVariant=null,this._lastColor=new t.Color,this._src=null,this.variants=["star","wave","heart","bolt","balls","drips","flames","grid","cube","circles","shield","locking","seal","circleslash"],e){if(e.src&&e.variant)throw new Error("BB.ImageBrush2D: The config.src and config.variant properties are mutually exlusiveand cannot both be included in the same config object.");e.src&&"string"==typeof e.src&&(this.src=e.src),e.variant&&"string"==typeof e.variant&&-1!==this.variants.indexOf(e.variant)&&(this.variant=e.variant)}},t.ImageBrush2D.prototype=Object.create(t.BaseBrush2D.prototype),t.ImageBrush2D.prototype.constructor=t.ImageBrush2D,Object.defineProperty(t.ImageBrush2D.prototype,"src",{get:function(){return this._src},set:function(t){this._src=t,this.variant=null,r=!1,this._image=new Image,this._image.src=this.src,this._image.onload=function(){r=!0},o=!0}}),t.ImageBrush2D.prototype.update=function(e){t.BaseBrush2D.prototype.update.call(this,e),e.hasOwnProperty("isDown")&&(this.hidden=e.isDown===!1)},t.ImageBrush2D.prototype.draw=function(e){function n(){var e,n,r,o;switch(i.color&&i.color instanceof t.Color?(e=i.color.r,n=i.color.g,r=i.color.b,o=i.color.a):(e=255,n=255,r=255,o=255),i.variant){case"star":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M143.169,166.502L100,135.139l-43.169,31.363l16.489-50.746L30.152,84.391h53.359L100,33.644l16.489,50.748h53.358 l-43.168,31.365L143.169,166.502z M100,127.723l31.756,23.072l-12.13-37.332l31.757-23.072H112.13L100,53.06L87.87,90.391H48.618 l31.756,23.072l-12.13,37.332L100,127.723z"/></svg>';case"wave":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><g><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M163.888,97.971c-5.43-5.354-11.042-10.887-22.235-10.887c-11.195,0-16.806,5.533-22.234,10.887 c-5.101,5.027-9.918,9.777-19.685,9.777c-9.766,0-14.581-4.75-19.684-9.777c-5.427-5.354-11.039-10.887-22.233-10.887 c-11.193,0-16.806,5.533-22.233,10.887c-5.1,5.027-9.919,9.777-19.684,9.777c-0.13,0-0.25-0.01-0.379-0.012v5.169 c0.129,0.002,0.249,0.012,0.379,0.012c11.192,0,16.806-5.536,22.233-10.887c5.101-5.028,9.917-9.781,19.684-9.781 c9.766,0,14.584,4.753,19.685,9.781c5.427,5.351,11.04,10.887,22.232,10.887c11.194,0,16.807-5.536,22.233-10.887 c5.102-5.028,9.919-9.781,19.686-9.781c9.766,0,14.584,4.753,19.688,9.781c5.428,5.351,11.04,10.887,22.234,10.887 c0.312,0,0.602-0.02,0.905-0.028v-5.169c-0.302,0.011-0.594,0.028-0.905,0.028C173.808,107.748,168.987,102.998,163.888,97.971z"/><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M183.574,113.917c-11.601,0-17.361-5.679-22.932-11.169c-4.964-4.892-9.641-9.499-18.99-9.499 c-9.352,0-14.027,4.608-18.977,9.486c-5.581,5.503-11.341,11.182-22.942,11.182c-11.601,0-17.361-5.68-22.932-11.173 c-4.957-4.886-9.632-9.495-18.985-9.495c-9.352,0-14.026,4.608-18.974,9.485c-5.583,5.504-11.343,11.183-22.943,11.183 c-0.087,0-0.17-0.003-0.253-0.007l-1.125-0.02v-7.17l1.379,0.027c9.355,0,14.031-4.609,18.981-9.489 c5.57-5.494,11.33-11.175,22.936-11.175c11.608,0,17.367,5.681,22.936,11.175c4.957,4.884,9.631,9.489,18.981,9.489 c9.354,0,14.03-4.607,18.979-9.487c5.574-5.497,11.334-11.177,22.939-11.177c11.604,0,17.365,5.681,22.938,11.175 c4.95,4.88,9.626,9.489,18.984,9.489c0.209,0,0.408-0.009,0.608-0.018l1.297-0.047v7.176l-1.278,0.041 C183.994,113.908,183.789,113.917,183.574,113.917z M57.816,91.249c10.173,0,15.132,4.889,20.382,10.065 c5.291,5.216,10.754,10.603,21.535,10.603c10.782,0,16.245-5.386,21.527-10.595c5.261-5.186,10.22-10.073,20.392-10.073 c10.17,0,15.129,4.887,20.381,10.06c5.281,5.207,10.729,10.576,21.446,10.608v-3.169c-10.114-0.03-15.06-4.905-20.294-10.065 c-5.285-5.21-10.75-10.599-21.533-10.599c-10.785,0-16.248,5.388-21.531,10.598c-5.254,5.178-10.213,10.066-20.388,10.066 c-10.17,0-15.128-4.885-20.376-10.056c-5.292-5.22-10.753-10.608-21.541-10.608c-10.786,0-16.249,5.388-21.531,10.599 c-5.143,5.069-10.006,9.864-19.765,10.06v3.169c10.37-0.203,15.725-5.481,20.906-10.589C42.687,96.136,47.645,91.249,57.816,91.249 z"/></g><g><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M163.888,76.934c-5.43-5.352-11.042-10.884-22.235-10.884c-11.195,0-16.806,5.532-22.234,10.884 c-5.101,5.031-9.918,9.781-19.685,9.781c-9.766,0-14.581-4.75-19.684-9.781C74.623,71.582,69.011,66.05,57.816,66.05 c-11.193,0-16.806,5.532-22.233,10.884c-5.1,5.031-9.919,9.781-19.684,9.781c-0.13,0-0.25-0.011-0.379-0.012v5.165 c0.129,0.002,0.249,0.012,0.379,0.012c11.192,0,16.806-5.532,22.233-10.883c5.101-5.031,9.917-9.782,19.684-9.782 c9.766,0,14.584,4.751,19.685,9.782c5.427,5.351,11.04,10.883,22.232,10.883c11.194,0,16.807-5.532,22.233-10.883 c5.102-5.031,9.919-9.782,19.686-9.782c9.766,0,14.584,4.751,19.688,9.782c5.428,5.351,11.04,10.883,22.234,10.883 c0.312,0,0.602-0.019,0.905-0.028v-5.165c-0.302,0.011-0.594,0.028-0.905,0.028C173.808,86.715,168.987,81.965,163.888,76.934z"/><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M183.574,92.88c-11.604,0-17.365-5.679-22.937-11.171c-4.953-4.883-9.631-9.494-18.985-9.494 c-9.356,0-14.033,4.612-18.983,9.494c-5.57,5.492-11.329,11.171-22.936,11.171c-11.605,0-17.364-5.679-22.935-11.171 c-4.95-4.882-9.625-9.494-18.982-9.494c-9.356,0-14.032,4.612-18.981,9.494C33.264,87.201,27.503,92.88,15.899,92.88 c-0.087,0-0.17-0.003-0.253-0.007l-1.125-0.02v-7.158l1.379,0.02c9.359,0,14.033-4.611,18.981-9.493 c5.571-5.493,11.331-11.172,22.936-11.172c11.607,0,17.366,5.679,22.936,11.172c4.953,4.883,9.628,9.493,18.981,9.493 c9.358,0,14.033-4.611,18.982-9.493c5.573-5.494,11.333-11.172,22.937-11.172c11.603,0,17.364,5.679,22.936,11.17 c4.95,4.883,9.624,9.495,18.986,9.495c0.209,0,0.408-0.009,0.608-0.017l1.297-0.047v7.169l-1.251,0.042 C184.014,92.871,183.799,92.88,183.574,92.88z M57.816,70.215c10.178,0,15.137,4.892,20.387,10.07 c5.283,5.208,10.746,10.595,21.53,10.595c10.786,0,16.249-5.386,21.531-10.595c5.251-5.179,10.211-10.07,20.388-10.07 c10.175,0,15.136,4.891,20.389,10.069c5.27,5.195,10.717,10.564,21.438,10.596v-3.165c-10.118-0.03-15.062-4.907-20.294-10.069 c-5.285-5.209-10.75-10.596-21.533-10.596s-16.246,5.385-21.529,10.594c-5.252,5.18-10.211,10.071-20.39,10.071 c-10.174,0-15.133-4.89-20.383-10.066C74.065,72.437,68.603,67.05,57.816,67.05c-10.785,0-16.248,5.387-21.531,10.596 c-5.141,5.072-10.002,9.868-19.765,10.063v3.166c10.374-0.203,15.729-5.481,20.91-10.589C42.681,75.106,47.64,70.215,57.816,70.215 z"/></g><g><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M163.888,119.004c-5.43-5.351-11.042-10.884-22.235-10.884c-11.195,0-16.806,5.533-22.234,10.884 c-5.101,5.031-9.918,9.781-19.685,9.781c-9.766,0-14.581-4.75-19.684-9.781c-5.427-5.351-11.039-10.884-22.233-10.884 c-11.193,0-16.806,5.533-22.233,10.884c-5.1,5.031-9.919,9.781-19.684,9.781c-0.13,0-0.25-0.01-0.379-0.012v5.165 c0.129,0.002,0.249,0.012,0.379,0.012c11.192,0,16.806-5.532,22.233-10.883c5.101-5.031,9.917-9.781,19.684-9.781 c9.766,0,14.584,4.75,19.685,9.781c5.427,5.351,11.04,10.883,22.232,10.883c11.194,0,16.807-5.532,22.233-10.883 c5.102-5.031,9.919-9.781,19.686-9.781c9.766,0,14.584,4.75,19.688,9.781c5.428,5.351,11.04,10.883,22.234,10.883 c0.312,0,0.602-0.019,0.905-0.028v-5.165c-0.302,0.011-0.594,0.028-0.905,0.028C173.808,128.785,168.987,124.035,163.888,119.004z" /><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M183.574,134.95c-11.604,0-17.365-5.679-22.937-11.171c-4.952-4.882-9.63-9.493-18.985-9.493 c-9.357,0-14.033,4.611-18.983,9.493c-5.57,5.492-11.329,11.171-22.936,11.171c-11.605,0-17.364-5.679-22.935-11.171 c-4.949-4.882-9.624-9.493-18.982-9.493c-9.357,0-14.032,4.611-18.981,9.493c-5.571,5.492-11.332,11.171-22.936,11.171 c-0.087,0-0.17-0.003-0.253-0.007l-1.125-0.02v-7.166l1.379,0.027c9.359,0,14.033-4.611,18.981-9.493 c5.572-5.493,11.333-11.172,22.936-11.172c11.604,0,17.365,5.679,22.936,11.172c4.953,4.884,9.628,9.493,18.981,9.493 c9.358,0,14.033-4.611,18.982-9.493c5.575-5.495,11.335-11.172,22.937-11.172c11.601,0,17.361,5.677,22.934,11.167 c4.952,4.887,9.626,9.498,18.988,9.498c0.209,0,0.408-0.009,0.608-0.018l1.297-0.047v7.17l-1.251,0.041 C184.014,134.941,183.799,134.95,183.574,134.95z M57.816,112.286c10.179,0,15.137,4.892,20.387,10.069 c5.283,5.209,10.746,10.595,21.53,10.595c10.786,0,16.249-5.386,21.531-10.595c5.251-5.178,10.21-10.069,20.388-10.069 c10.176,0,15.137,4.892,20.39,10.069c5.269,5.193,10.716,10.562,21.438,10.595v-3.165c-10.118-0.03-15.062-4.907-20.294-10.069 c-5.288-5.211-10.752-10.596-21.533-10.596s-16.244,5.384-21.527,10.591c-5.254,5.184-10.213,10.074-20.392,10.074 c-10.174,0-15.133-4.89-20.383-10.066c-5.286-5.212-10.75-10.599-21.534-10.599c-10.783,0-16.247,5.386-21.53,10.595 c-5.142,5.072-10.003,9.869-19.766,10.064v3.165c10.374-0.203,15.729-5.481,20.91-10.589 C42.68,117.178,47.639,112.286,57.816,112.286z"/></g></svg>';case"heart":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M100.857,149.971l-1.664-1.108c-0.396-0.265-9.854-6.593-21.034-16.174c-15.13-12.966-25.576-25.093-31.049-36.041 c-4.48-8.961-3.554-20.14,2.479-29.903c6.141-9.937,16.242-16.109,26.361-16.109c6.568,0,15.979,2.534,24.906,14.006 c8.923-11.473,18.333-14.006,24.901-14.006c10.118,0,20.219,6.173,26.361,16.111c6.033,9.763,6.961,20.941,2.48,29.902 c-5.474,10.948-15.92,23.075-31.048,36.041c-11.179,9.581-20.635,15.909-21.031,16.173L100.857,149.971z M75.951,56.635 c-8.056,0-16.201,5.083-21.258,13.264c-4.932,7.981-5.761,16.978-2.216,24.066c10.766,21.538,40.951,43.557,48.38,48.758 c7.428-5.201,37.608-27.221,48.376-48.758c3.544-7.087,2.715-16.083-2.218-24.064c-5.057-8.183-13.202-13.266-21.257-13.266 c-8.201,0-15.949,5.119-22.405,14.804l-2.496,3.744l-2.496-3.744C91.903,61.754,84.153,56.635,75.951,56.635z"/></svg>';case"bolt":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M76.247,183.564l19.897-73.016l-30.646,8.619L124.41,16.836l-18.489,70.369l30.463-7.496L76.247,183.564z M103.289,103.345 l-12.116,44.466l34.996-60.438L98.948,94.07l11.108-42.281l-34.107,59.244L103.289,103.345z"/></svg>';case"balls":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><g> <g> <circle fill="#FFFFFF" cx="29.57" cy="100" r="6.961"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M29.569,109.461c-5.217,0-9.461-4.244-9.461-9.461c0-5.217,4.244-9.461,9.461-9.461c5.217,0,9.462,4.244,9.462,9.461 C39.031,105.217,34.787,109.461,29.569,109.461z M29.569,95.539c-2.46,0-4.461,2.001-4.461,4.461s2.001,4.461,4.461,4.461 c2.46,0,4.462-2.001,4.462-4.461S32.03,95.539,29.569,95.539z"/> </g> <g> <circle fill="#FFFFFF" cx="40.77" cy="100" r="11.2"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M40.77,113.699c-7.554,0-13.7-6.145-13.7-13.699s6.146-13.7,13.7-13.7s13.7,6.146,13.7,13.7S48.324,113.699,40.77,113.699 z M40.77,91.3c-4.797,0-8.7,3.903-8.7,8.7c0,4.796,3.903,8.699,8.7,8.699s8.7-3.902,8.7-8.699 C49.47,95.203,45.567,91.3,40.77,91.3z"/> </g> <g> <circle fill="#FFFFFF" cx="56.45" cy="100.001" r="15.68"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M56.45,118.18c-10.025,0-18.181-8.154-18.181-18.179c0-10.025,8.156-18.181,18.181-18.181 c10.024,0,18.18,8.156,18.18,18.181C74.63,110.025,66.475,118.18,56.45,118.18z M56.45,86.82c-7.268,0-13.181,5.913-13.181,13.181 c0,7.267,5.913,13.179,13.181,13.179c7.267,0,13.18-5.912,13.18-13.179C69.63,92.733,63.717,86.82,56.45,86.82z"/> </g> <g> <path fill="#FFFFFF" d="M97.411,100.001c0,12.124-9.826,21.95-21.951,21.95s-21.953-9.826-21.953-21.95 c0-12.126,9.828-21.953,21.953-21.953S97.411,87.875,97.411,100.001z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M75.46,124.451c-13.483,0-24.453-10.968-24.453-24.45c0-13.483,10.97-24.453,24.453-24.453 c13.482,0,24.451,10.97,24.451,24.453C99.911,113.483,88.942,124.451,75.46,124.451z M75.46,80.548 c-10.727,0-19.453,8.727-19.453,19.453c0,10.725,8.727,19.45,19.453,19.45c10.726,0,19.451-8.725,19.451-19.45 C94.911,89.275,86.186,80.548,75.46,80.548z"/> </g> <g> <path fill="#FFFFFF" d="M131.52,100.002c0,16.973-13.757,30.73-30.732,30.73c-16.975,0-30.734-13.758-30.734-30.73 c0-16.977,13.76-30.734,30.734-30.734C117.763,69.268,131.52,83.025,131.52,100.002z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M100.787,133.232c-18.326,0-33.234-14.907-33.234-33.23c0-18.326,14.909-33.234,33.234-33.234 c18.324,0,33.232,14.909,33.232,33.234C134.02,118.325,119.111,133.232,100.787,133.232z M100.787,71.768 c-15.568,0-28.234,12.666-28.234,28.234c0,15.566,12.666,28.23,28.234,28.23c15.567,0,28.232-12.664,28.232-28.23 C129.02,84.434,116.354,71.768,100.787,71.768z"/> </g> <g> <path fill="#FFFFFF" d="M177.392,100.002c0,23.762-19.26,43.023-43.025,43.023c-23.765,0-43.028-19.262-43.028-43.023 c0-23.767,19.264-43.027,43.028-43.027C158.132,56.975,177.392,76.235,177.392,100.002z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M134.366,145.525c-25.104,0-45.528-20.422-45.528-45.523c0-25.104,20.424-45.527,45.528-45.527 c25.103,0,45.525,20.423,45.525,45.527C179.892,125.104,159.469,145.525,134.366,145.525z M134.366,59.475 c-22.347,0-40.528,18.181-40.528,40.527c0,22.345,18.182,40.523,40.528,40.523c22.346,0,40.525-18.179,40.525-40.523 C174.892,77.655,156.712,59.475,134.366,59.475z"/> </g></g></svg>';case"drips":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><g> <path fill="rgba('+e+", "+n+", "+r+","+o+')" fill-rule="evenodd" clip-rule="evenodd" d="M101.807,72.491c2.018-6.874,5.617-16.757,1.506-23.193 c-3.905-6.113-11.555-2.917-9.19,2.807c0.845,2.044,2.733,4.043,4.164,5.59C102.023,61.739,102.396,67.181,101.807,72.491z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" fill-rule="evenodd" clip-rule="evenodd" d="M102.5,78.583c3.533-7.633,8.01-19.14,16.618-21.642 c8.178-2.376,12.458,6.369,5.941,9.589c-2.327,1.153-5.542,1.453-8.001,1.715C110.631,68.921,106.088,73.441,102.5,78.583z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" fill-rule="evenodd" clip-rule="evenodd" d="M91.772,109.562c-3.189,0-5.788-2.6-5.788-5.787c0-3.188,2.599-5.789,5.788-5.789 c3.187,0,5.787,2.6,5.787,5.789C97.559,106.963,94.959,109.562,91.772,109.562z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" fill-rule="evenodd" clip-rule="evenodd" d="M92.194,131.234c-6.503-19.299-14.249-48.189-34.315-56.477 c-19.065-7.87-31.666,12.05-16.825,21.523c5.301,3.386,12.955,4.963,18.809,6.231C75.167,105.832,84.912,117.914,92.194,131.234z" /> <path fill="rgba('+e+", "+n+", "+r+","+o+')" fill-rule="evenodd" clip-rule="evenodd" d="M76.101,133.059c-3.35,0-6.083-2.73-6.083-6.082c0-3.35,2.733-6.082,6.083-6.082 s6.083,2.732,6.083,6.082C82.184,130.328,79.451,133.059,76.101,133.059z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" fill-rule="evenodd" clip-rule="evenodd" d="M89.065,158.012c5.576-29.148,11.079-72.364,38.403-88.272 c25.97-15.111,48.07,11.163,28.528,27.756c-6.976,5.93-17.731,9.706-25.92,12.691C108.635,117.994,96.933,137.352,89.065,158.012z" /> <path fill="rgba('+e+", "+n+", "+r+","+o+')" fill-rule="evenodd" clip-rule="evenodd" d="M87.855,94.271c-7.565,0-13.765-6.177-13.765-13.762 c0-7.574,6.2-13.766,13.765-13.766c7.582,0,13.779,6.192,13.779,13.766C101.635,88.095,95.438,94.271,87.855,94.271z"/></g></svg>';case"flames":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><g> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M63.483,90.598c-3.254,1.794-8.575,0.489-11.714,3.509c-5.267,5.55-0.616,10.749,2.557,11.73 c1.243,0.247,15.215,4.718,19.764-14.904c3.639-20.603,16.573-21.23,18.261-21.391c9.035-0.595,18.811,12.88,30.622,1.43 c-9.957,14.972-25.383,1.251-32.25,5.278c-6.976,5.473,0.198,14.331,8.895,14.506c8.654-0.223,23.721-21.253,39.99-20.315 c14.516,0.197,26.641,9.619,38.249,3.321c-17.349,13.542-34.842-6.068-46.412,7.426c-7.613,10.392,1.68,16.533,5.605,12.43 c4.882-5.322,5.061-10.038,15.093-13.023c-1.984,0.992-6.08,1.887-8.061,7.266c-7.678,19.46-15.369,10.928-32.023,8.443 c-21.055-1.89-38.226,8.402-34.416,16.959c6.045,10.555,14.871-2.84,17.743-5.967c12.424-13.883,18.651-0.719,28.922-3.318 c-9.886,4.56-10.58-2.643-18.756,0.986c-9.647,4.283-6.109,17.09-24.423,20.043c-12.009,2.284-14.78-4.71-27.778-7.777 c-4.35-1.104-8.429,0.705-8.606,4.795c1.343,10.4,13.821-1.748,21.315,3.486c-9.809-1.088-9.978,6.889-18.995,6.968 c-10.778-0.355-19.255-8.405-22.362-21.401c-2.542-13.35,3.411-25.616,21.315-24.789c27.918,2.146,21.619-8.761,32.04-14.024 C70.507,78.472,74.096,85.54,63.483,90.598"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M47.063,132.568h-0.002c-5.319-0.176-10.201-2.246-14.117-5.986c-3.923-3.746-6.804-9.101-8.33-15.484 c-1.417-7.443-0.151-14.012,3.563-18.5c3.758-4.541,9.958-6.764,17.844-6.4c2.383,0.183,4.598,0.276,6.586,0.276 c13.106,0,15.871-3.9,18.799-8.03c1.586-2.238,3.227-4.552,6.61-6.261l0.099,0.15c-3.255,2.676-4.435,5.528-5.576,8.287 c-1.528,3.692-2.972,7.179-9.017,10.06c-1.384,0.763-3.106,0.966-4.931,1.181c-2.441,0.288-4.967,0.586-6.76,2.311 c-2.521,2.657-2.568,5.06-2.164,6.606c0.65,2.49,2.899,4.419,4.685,4.972c0.053,0.011,0.146,0.033,0.267,0.062 c0.666,0.162,2.224,0.541,4.195,0.541c5.295,0,12.229-2.679,15.188-15.441c1.499-8.489,4.732-14.617,9.61-18.208 c2.545-1.873,5.435-2.963,8.587-3.24l0.143-0.013c0.199-0.013,0.399-0.02,0.601-0.02c2.966,0,5.978,1.389,9.166,2.858 c3.434,1.583,6.983,3.219,10.743,3.219c3.573,0,6.863-1.505,10.059-4.603l0.138,0.115c-3.234,4.863-7.427,7.228-12.817,7.228 c-3.174,0-6.29-0.76-9.305-1.495c-2.51-0.612-4.882-1.19-6.893-1.19c-1.321,0-2.39,0.25-3.265,0.763 c-2.446,1.92-3.312,4.438-2.428,7.084c1.348,4.033,6.196,7.151,11.278,7.253c3.505-0.09,8.1-3.648,13.42-7.768 c7.237-5.604,16.244-12.579,25.506-12.579c0.356,0,0.715,0.011,1.067,0.031c5.645,0.077,10.889,1.535,15.959,2.946 c4.698,1.307,9.136,2.541,13.459,2.541c3.237,0,6.11-0.705,8.783-2.155l0.099,0.151c-4.416,3.447-9.129,5.052-14.832,5.053 c-0.001,0-0.002,0-0.003,0c-3.783,0-7.47-0.704-11.035-1.385c-3.304-0.631-6.424-1.227-9.392-1.227 c-4.689,0-8.229,1.581-11.138,4.974c-3.861,5.271-3.026,8.846-2.184,10.507c0.942,1.858,2.782,3.059,4.688,3.059 c1.154,0,2.181-0.435,2.968-1.258c1.358-1.48,2.345-2.905,3.298-4.282c2.454-3.544,4.574-6.605,11.835-8.765l0.065,0.167 c-0.311,0.155-0.678,0.311-1.067,0.475c-2.106,0.89-5.289,2.234-6.948,6.741c-4.338,10.995-8.667,12.51-12.7,12.51 c-2.685,0-5.699-0.803-9.191-1.734c-2.989-0.797-6.378-1.7-10.23-2.275c-1.669-0.149-3.366-0.226-5.039-0.226 c-6.442,0-12.655,1.104-17.965,3.192c-4.929,1.938-8.672,4.591-10.54,7.467c-1.406,2.167-1.675,4.38-0.775,6.399 c1.493,2.606,3.288,3.932,5.332,3.932c4.098,0,8.351-5.193,10.891-8.297c0.539-0.658,1.004-1.227,1.371-1.625 c3.971-4.438,7.626-6.505,11.502-6.505c2.54,0,4.935,0.884,7.25,1.738c2.355,0.87,4.791,1.769,7.421,1.769 c0.954,0,1.868-0.113,2.793-0.348l0.061,0.17c-2.301,1.061-4.306,1.576-6.132,1.576c-1.697,0-3.04-0.434-4.339-0.854 c-1.256-0.407-2.442-0.79-3.899-0.79c-1.352,0-2.787,0.345-4.387,1.055c-3.8,1.688-5.55,4.723-7.401,7.936 c-2.79,4.84-5.952,10.326-17.044,12.114c-1.597,0.304-3.056,0.452-4.461,0.452c-4.63,0-7.831-1.653-11.536-3.567 c-3.132-1.618-6.681-3.451-11.816-4.663c-0.826-0.209-1.649-0.315-2.448-0.315c-3.541,0-5.915,1.973-6.048,5.026 c0.383,2.949,1.664,4.271,4.153,4.271c1.541,0,3.396-0.494,5.359-1.018c2.28-0.608,4.639-1.236,6.916-1.236 c1.922,0,3.508,0.455,4.849,1.391L66.05,125.6c-0.607-0.066-1.197-0.102-1.756-0.102c-3.988,0-6.122,1.676-8.381,3.449 c-2.244,1.762-4.564,3.583-8.848,3.621H47.063z M44.333,86.338c-7.026,0-12.564,2.204-16.016,6.375 c-3.681,4.447-4.933,10.963-3.526,18.347c1.518,6.346,4.38,11.67,8.278,15.392c3.883,3.709,8.724,5.762,13.996,5.936 c4.221-0.037,6.517-1.84,8.736-3.582c2.184-1.715,4.441-3.486,8.492-3.486c0.452,0,0.925,0.021,1.41,0.065 c-1.244-0.779-2.701-1.159-4.441-1.159c-2.254,0-4.601,0.626-6.87,1.23c-1.975,0.527-3.841,1.024-5.405,1.024 c-2.564,0-3.941-1.412-4.333-4.444c0.135-3.126,2.638-5.215,6.228-5.215c0.813,0,1.652,0.107,2.491,0.32 c5.155,1.217,8.716,3.056,11.856,4.678c3.685,1.904,6.867,3.547,11.453,3.547c1.394,0,2.842-0.146,4.43-0.449 c11.01-1.774,14.148-7.221,16.918-12.025c1.867-3.24,3.632-6.3,7.484-8.011c1.624-0.721,3.083-1.071,4.461-1.071 c1.485,0,2.685,0.389,3.955,0.8c1.285,0.416,2.614,0.847,4.283,0.846c1.583,0,3.307-0.396,5.248-1.205 c-0.648,0.112-1.299,0.169-1.97,0.169c-2.662,0-5.113-0.906-7.484-1.781c-2.3-0.849-4.679-1.727-7.187-1.727 c-3.82,0-7.434,2.048-11.368,6.445c-0.364,0.396-0.828,0.963-1.364,1.618c-2.562,3.128-6.849,8.364-11.031,8.364 c-2.113,0-3.962-1.356-5.493-4.031c-0.93-2.087-0.657-4.359,0.785-6.58c1.889-2.908,5.662-5.584,10.625-7.536 c5.331-2.097,11.566-3.205,18.031-3.205c1.678,0,3.381,0.077,5.061,0.228c3.868,0.577,7.262,1.481,10.256,2.28 c3.479,0.927,6.484,1.728,9.145,1.728c3.969,0,8.233-1.501,12.531-12.394c1.521-4.129,4.294-5.643,6.39-6.562 c-5.791,2.095-7.735,4.903-9.956,8.111c-0.958,1.382-1.947,2.812-3.315,4.303c-0.812,0.849-1.912,1.315-3.1,1.315 c-1.973,0-3.876-1.24-4.849-3.158c-0.861-1.698-1.72-5.346,2.203-10.701c2.951-3.441,6.533-5.042,11.279-5.042 c2.984,0,6.113,0.598,9.426,1.23c3.557,0.679,7.235,1.382,11.001,1.382c0.001,0,0.002,0,0.003,0c5.31,0,9.753-1.402,13.9-4.398 c-2.438,1.15-5.05,1.71-7.95,1.71c-4.349,0-8.797-1.237-13.508-2.548c-5.06-1.407-10.291-2.862-15.916-2.939 c-0.354-0.02-0.709-0.03-1.062-0.03c-9.199,0-17.804,6.662-25.396,12.541c-5.345,4.139-9.962,7.713-13.53,7.805 c-5.158-0.104-10.079-3.275-11.45-7.376c-0.91-2.724-0.023-5.313,2.498-7.291c0.914-0.537,2.012-0.794,3.366-0.794 c2.033,0,4.414,0.581,6.936,1.196c3.004,0.732,6.109,1.49,9.262,1.489c5.138,0,9.03-2.057,12.189-6.456 c-3.038,2.742-6.176,4.078-9.568,4.078c-3.8,0-7.368-1.645-10.819-3.236c-3.169-1.461-6.163-2.841-9.09-2.841 c-0.196,0-0.394,0.006-0.586,0.019l-0.141,0.013c-3.12,0.273-5.979,1.352-8.496,3.205c-4.839,3.563-8.049,9.652-9.541,18.099 c-2.986,12.882-10.004,15.587-15.364,15.587c-0.001,0,0,0,0,0c-1.993,0-3.566-0.383-4.237-0.547 c-0.118-0.029-0.209-0.051-0.269-0.062c-1.887-0.584-4.142-2.521-4.816-5.103c-0.416-1.591-0.369-4.059,2.212-6.779 c1.84-1.771,4.396-2.072,6.867-2.363c1.806-0.213,3.512-0.415,4.868-1.163c5.987-2.854,7.418-6.31,8.932-9.969 c1.074-2.593,2.182-5.27,4.999-7.814c-2.861,1.643-4.361,3.759-5.816,5.812c-2.955,4.168-5.746,8.106-18.946,8.106 c-1.992,0-4.212-0.093-6.597-0.276C45.446,86.351,44.882,86.338,44.333,86.338z"/></g></svg>';case"grid":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><g> <g> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="104.088" y="132.575" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -67.3253 122.6343)" width="20.564" height="20.023"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="133.034" y="132.249" transform="matrix(0.7071 -0.7072 0.7072 0.7071 -58.8638 142.9646)" width="20.182" height="20.563"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="104.142" y="103.742" transform="matrix(0.707 0.7072 -0.7072 0.707 114.0192 -47.5699)" width="20.566" height="20.179"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="132.899" y="103.764" transform="matrix(-0.7071 0.7071 -0.7071 -0.7071 324.8759 92.9823)" width="20.564" height="20.023"/> </g> <g> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="46.538" y="132.575" transform="matrix(0.7072 -0.7071 0.7071 0.7072 -84.1771 81.931)" width="20.565" height="20.023"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="75.484" y="132.249" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -75.7197 102.257)" width="20.183" height="20.563"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="46.592" y="103.742" transform="matrix(0.707 0.7072 -0.7072 0.707 97.1598 -6.8727)" width="20.566" height="20.181"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="75.349" y="103.763" transform="matrix(-0.7071 0.7071 -0.7071 -0.7071 226.6322 133.6762)" width="20.564" height="20.024"/> </g> <g> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="104.088" y="76.215" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -27.4725 106.1268)" width="20.564" height="20.022"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="133.034" y="75.888" transform="matrix(0.7071 -0.7072 0.7072 0.7071 -19.0079 126.4542)" width="20.182" height="20.563"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="104.142" y="47.382" transform="matrix(0.7071 0.7072 -0.7072 0.7071 74.1607 -64.0803)" width="20.565" height="20.179"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="132.899" y="47.403" transform="matrix(-0.7071 0.7071 -0.7071 -0.7071 285.0229 -3.2313)" width="20.564" height="20.023"/> </g> <g> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="46.538" y="76.215" transform="matrix(0.7072 -0.7071 0.7071 0.7072 -44.327 65.4261)" width="20.565" height="20.022"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="75.484" y="75.888" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -35.8666 85.7492)" width="20.183" height="20.563"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="46.537" y="47.381" transform="matrix(0.7071 0.7072 -0.7072 0.7071 57.2857 -23.3444)" width="20.565" height="20.18"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="75.349" y="47.403" transform="matrix(-0.7071 0.7071 -0.7071 -0.7071 186.7792 37.4626)" width="20.564" height="20.024"/> </g></g></svg>';case"cube":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><g><polygon fill="rgba('+e+", "+n+", "+r+","+o+')" points="50.689,71.558 58.907,76.305 108.227,47.858 100.002,43.115    "/><polygon fill="rgba('+e+", "+n+", "+r+","+o+')" points="67.123,81.049 75.342,85.795 124.66,57.351 116.437,52.606   "/><polygon fill="rgba('+e+", "+n+", "+r+","+o+')" points="83.558,90.541 91.775,95.286 141.095,66.842 132.87,62.1     "/><polygon fill="rgba('+e+", "+n+", "+r+","+o+')" points="100.002,156.885 100.003,147.394 50.689,118.91 50.689,128.442   "/><polygon fill="rgba('+e+", "+n+", "+r+","+o+')" points="100.005,137.905 100.007,128.416 50.686,99.938 50.689,109.433   "/><polygon fill="rgba('+e+", "+n+", "+r+","+o+')" points="100.008,118.929 100.01,109.438 50.716,80.948 50.72,90.442  "/><polygon fill="rgba('+e+", "+n+", "+r+","+o+')" points="149.314,71.558 141.095,76.301 141.098,133.181 149.314,128.442  "/><polygon fill="rgba('+e+", "+n+", "+r+","+o+')" points="132.877,81.044 124.657,85.787 124.662,142.66 132.879,137.922   "/><polygon fill="rgba('+e+", "+n+", "+r+","+o+')" points="116.439,90.531 108.22,95.273 108.227,152.142 116.444,147.4     "/></g></svg>';case"circles":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><g> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M62.923,108.923c-0.35,3.989-3.862,6.939-7.851,6.59c-3.989-0.348-6.936-3.864-6.591-7.853 c0.35-3.988,3.863-6.936,7.852-6.588C60.324,101.424,63.273,104.935,62.923,108.923z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M151.409,89.511c1.694,3.628,0.125,7.939-3.506,9.631c-3.623,1.691-7.937,0.121-9.63-3.504 c-1.688-3.628-0.125-7.938,3.504-9.632C145.41,84.314,149.722,85.883,151.409,89.511z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M72.172,126.46c1.693,3.631,0.125,7.94-3.504,9.632c-3.627,1.694-7.938,0.121-9.633-3.504 c-1.691-3.629-0.123-7.938,3.506-9.633C66.17,121.266,70.481,122.83,72.172,126.46z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M139.098,65.406c3.28,2.296,4.077,6.813,1.778,10.093c-2.291,3.276-6.812,4.072-10.091,1.781 c-3.275-2.298-4.078-6.813-1.781-10.093C131.305,63.906,135.82,63.107,139.098,65.406z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M88.95,137.023c3.282,2.299,4.079,6.813,1.781,10.095c-2.293,3.28-6.813,4.073-10.095,1.781 c-3.28-2.298-4.075-6.815-1.779-10.095C81.155,135.525,85.67,134.727,88.95,137.023z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M116.383,50.687c3.988,0.349,6.938,3.862,6.587,7.852c-0.347,3.983-3.864,6.933-7.85,6.587 c-3.985-0.35-6.937-3.86-6.589-7.848C108.883,53.285,112.396,50.335,116.383,50.687z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M108.762,137.783c3.992,0.35,6.939,3.862,6.59,7.851c-0.346,3.987-3.863,6.935-7.852,6.591 c-3.988-0.35-6.936-3.864-6.589-7.854C101.263,140.383,104.773,137.433,108.762,137.783z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M89.351,49.296c3.627-1.692,7.938-0.123,9.63,3.508c1.692,3.621,0.121,7.936-3.503,9.629 c-3.627,1.688-7.938,0.125-9.632-3.503C84.156,55.296,85.722,50.984,89.351,49.296z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M126.299,128.534c3.633-1.693,7.943-0.124,9.633,3.505c1.695,3.626,0.122,7.938-3.505,9.634 c-3.628,1.69-7.938,0.12-9.632-3.508C121.105,134.536,122.671,130.226,126.299,128.534z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M65.247,61.607c2.295-3.277,6.812-4.075,10.092-1.777c3.276,2.291,4.073,6.812,1.781,10.091 c-2.296,3.276-6.812,4.077-10.093,1.784C63.746,69.402,62.947,64.886,65.247,61.607z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M136.863,111.757c2.299-3.282,6.816-4.08,10.094-1.781c3.281,2.294,4.075,6.813,1.781,10.096 c-2.296,3.278-6.814,4.074-10.096,1.778C135.365,119.551,134.566,115.035,136.863,111.757z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M50.527,84.322c0.348-3.987,3.861-6.936,7.851-6.585c3.983,0.346,6.934,3.862,6.587,7.85 c-0.35,3.984-3.861,6.937-7.849,6.589C53.124,91.823,50.174,88.312,50.527,84.322z"/></g><g> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="75.462" cy="83.061" r="4.851"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M129.641,119.463c-0.916,2.519-3.698,3.816-6.217,2.899c-2.515-0.914-3.812-3.699-2.898-6.215 c0.918-2.517,3.697-3.815,6.215-2.901C129.261,114.165,130.559,116.948,129.641,119.463z"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="70.1" cy="97.793" r="4.851"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M135.221,102.23c0.467,2.64-1.295,5.153-3.934,5.618c-2.635,0.466-5.15-1.297-5.619-3.934 c-0.463-2.636,1.295-5.153,3.934-5.618C132.242,97.834,134.758,99.592,135.221,102.23z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M77.6,112.39c0.465,2.642-1.294,5.154-3.934,5.62c-2.638,0.467-5.152-1.297-5.621-3.934 c-0.465-2.641,1.297-5.153,3.935-5.619C74.619,107.992,77.134,109.751,77.6,112.39z"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M131.438,84.516c1.723,2.052,1.455,5.111-0.598,6.832c-2.049,1.723-5.109,1.453-6.832-0.597 c-1.722-2.052-1.456-5.109,0.595-6.832C126.66,82.196,129.717,82.463,131.438,84.516z"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="82.899" cy="125.244" r="4.85"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M119.304,71.065c2.518,0.915,3.815,3.698,2.897,6.218c-0.913,2.514-3.698,3.812-6.215,2.897 c-2.516-0.917-3.816-3.696-2.9-6.215C114.006,71.446,116.787,70.146,119.304,71.065z"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="97.632" cy="130.606" r="4.85"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M102.07,65.484c2.638-0.465,5.153,1.295,5.617,3.935c0.467,2.635-1.295,5.152-3.933,5.619 c-2.637,0.463-5.153-1.295-5.621-3.933C97.672,68.464,99.431,65.948,102.07,65.484z"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="113.072" cy="127.884" r="4.85"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M84.355,69.268c2.052-1.722,5.11-1.455,6.832,0.599c1.722,2.049,1.455,5.109-0.597,6.833 c-2.051,1.72-5.11,1.455-6.832-0.596C82.036,74.046,82.302,70.989,84.355,69.268z"/></g><g> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="97.263" cy="83.369" r="2.775"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M104.455,120.013c-1.39,0.647-3.04,0.048-3.688-1.342c-0.648-1.387-0.046-3.039,1.341-3.688 c1.39-0.646,3.039-0.048,3.688,1.341C106.443,117.716,105.844,119.367,104.455,120.013z"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="89.135" cy="87.159" r="2.775"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="111.41" cy="113.707" r="2.775"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="83.99" cy="94.507" r="2.776"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="116.555" cy="106.36" r="2.775"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="83.207" cy="103.442" r="2.775"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M119.852,96.253c0.648,1.388,0.048,3.039-1.344,3.687c-1.385,0.647-3.037,0.046-3.686-1.343 c-0.646-1.389-0.049-3.038,1.34-3.688C117.555,94.263,119.206,94.861,119.852,96.253z"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="86.998" cy="111.571" r="2.775"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="113.547" cy="89.295" r="2.775"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="94.345" cy="116.716" r="2.775"/> <path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M106.441,81.387c1.525,0.133,2.656,1.478,2.521,3.005c-0.133,1.526-1.479,2.656-3.006,2.523 c-1.525-0.134-2.656-1.479-2.523-3.005C103.57,82.381,104.914,81.252,106.441,81.387z"/></g><g> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="105.747" cy="92.615" r="1.529"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="94.798" cy="108.252" r="1.528"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="101.105" cy="90.924" r="1.528"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="99.441" cy="109.942" r="1.528"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="96.239" cy="91.783" r="1.53"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="104.307" cy="109.085" r="1.528"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="92.453" cy="94.958" r="1.529"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="108.092" cy="105.909" r="1.528"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="90.764" cy="99.601" r="1.529"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="109.782" cy="101.266" r="1.529"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="91.621" cy="104.467" r="1.529"/> <circle fill="rgba('+e+", "+n+", "+r+","+o+')" cx="108.924" cy="96.4" r="1.528"/></g></svg>';
case"shield":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><g><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M142.824,81.079c-0.005-0.145-0.007-0.291-0.019-0.432c-0.235-4.191-2.952-8.801-6.518-10.924l-29.664-17.67c-1.024-0.611-2.061-0.98-3.089-1.113c-1.143-0.297-2.372-0.455-3.626-0.455c-1.345,0-2.651,0.184-3.859,0.523c-0.891,0.17-1.785,0.515-2.674,1.045l-29.661,17.67c-3.564,2.123-6.287,6.738-6.519,10.934c-0.01,0.139-0.016,0.284-0.018,0.427c-0.002,0.052-0.008,0.101-0.008,0.151v0.065v37.398v0.067c0,0.05,0.006,0.103,0.008,0.153c0.003,0.147,0.008,0.293,0.018,0.432c0.236,4.192,2.957,8.804,6.519,10.926l29.662,17.671c1.028,0.609,2.063,0.979,3.091,1.11c1.143,0.3,2.372,0.456,3.626,0.456c1.344,0,2.649-0.182,3.86-0.521c0.893-0.172,1.784-0.518,2.672-1.047l29.662-17.669c3.566-2.124,6.284-6.739,6.518-10.934c0.012-0.14,0.014-0.284,0.019-0.428c0-0.051,0.005-0.103,0.005-0.149v-0.067V81.301v-0.065C142.829,81.184,142.824,81.131,142.824,81.079z M63.815,118.579V81.421l29.561,17.612l0.027,0.016c0.391,0.236,0.774,0.565,1.133,0.953c-0.367,0.394-0.758,0.729-1.16,0.965L63.815,118.579z M136.188,81.419v37.16l-29.562-17.612l-0.028-0.014c-0.39-0.234-0.772-0.564-1.132-0.951c0.367-0.397,0.759-0.732,1.16-0.969L136.188,81.419z M132.791,75.539c0.044,0.026,0.084,0.053,0.122,0.078c-0.038,0.023-0.076,0.052-0.122,0.077l-29.464,17.562V57.989L132.791,75.539z M96.675,93.263L67.114,75.653c-0.043-0.028-0.084-0.055-0.122-0.081c0.038-0.022,0.079-0.049,0.122-0.074l29.561-17.62V93.263z M67.212,124.461c-0.044-0.026-0.085-0.053-0.125-0.077c0.04-0.026,0.081-0.052,0.125-0.078l29.463-17.563v35.269L67.212,124.461z M103.327,106.739l29.562,17.608c0.044,0.025,0.085,0.052,0.122,0.078c-0.037,0.026-0.078,0.052-0.122,0.076l-29.562,17.62V106.739z"/></g></svg>';case"locking":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><g><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M109.25,83.803c-4.012,0-7.275,3.266-7.275,7.278c0,1.32,0,1.32,0,1.32c0.537,1.271-0.816,4.129-2.996,6.352c-2.188,2.227-4.984,3.638-6.215,3.137c0,0,0,0-1.275,0c-4.01,0-7.275,3.266-7.275,7.277s3.266,7.278,7.275,7.278c4.014,0,7.279-3.267,7.279-7.278c0-1.327,0-1.327,0-1.327c-0.541-1.277,0.799-4.139,2.984-6.362c2.18-2.221,4.98-3.624,6.217-3.119c0,0,0,0,1.281,0c4.014,0,7.279-3.263,7.279-7.277C116.529,87.068,113.264,83.803,109.25,83.803z"/><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M110.24,48.69c-4.014,0-7.275,3.266-7.275,7.278c0,1.32,0,1.32,0,1.32c0.535,1.267-0.814,4.126-2.998,6.352c-2.186,2.224-4.982,3.634-6.215,3.137c0,0,0,0-1.273,0c-4.014,0-7.277,3.263-7.277,7.273c0,4.016,3.264,7.278,7.277,7.278s7.277-3.263,7.277-7.278c0-1.327,0-1.327,0-1.327c-0.543-1.277,0.801-4.135,2.982-6.358s4.982-3.627,6.223-3.123c0,0,0,0,1.279,0c4.016,0,7.277-3.263,7.277-7.273C117.518,51.956,114.256,48.69,110.24,48.69z"/><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M143.869,82.318c-4.01,0-7.275,3.27-7.275,7.278c0,1.323,0,1.323,0,1.323c0.535,1.268-0.814,4.126-2.998,6.349c-2.186,2.227-4.98,3.638-6.213,3.137c0,0,0,0-1.275,0c-4.012,0-7.275,3.266-7.275,7.277c0,4.016,3.264,7.278,7.275,7.278c4.014,0,7.279-3.263,7.279-7.278c0-1.327,0-1.327,0-1.327c-0.541-1.277,0.801-4.139,2.98-6.362c2.184-2.219,4.982-3.624,6.223-3.119c0,0,0,0,1.279,0c4.014,0,7.279-3.263,7.279-7.277C151.148,85.588,147.883,82.318,143.869,82.318z"/><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M73.889,85.039c-4.012,0-7.275,3.267-7.275,7.278c0,1.32,0,1.32,0,1.32c0.535,1.271-0.812,4.129-2.998,6.352c-2.188,2.228-4.98,3.638-6.213,3.137c0,0,0,0-1.275,0c-4.012,0-7.275,3.267-7.275,7.277c0,4.016,3.264,7.278,7.275,7.278c4.014,0,7.277-3.263,7.277-7.278c0-1.327,0-1.327,0-1.327c-0.541-1.277,0.801-4.139,2.984-6.362c2.182-2.223,4.982-3.623,6.221-3.119c0,0,0,0,1.279,0c4.016,0,7.277-3.263,7.277-7.277C81.166,88.306,77.904,85.039,73.889,85.039z"/><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M107.52,118.671c-4.012,0-7.277,3.266-7.277,7.278c0,1.32,0,1.32,0,1.32c0.537,1.267-0.812,4.125-2.998,6.352c-2.186,2.224-4.98,3.634-6.213,3.137c0,0,0,0-1.271,0c-4.014,0-7.279,3.264-7.279,7.276s3.266,7.275,7.279,7.275c4.01,0,7.275-3.263,7.275-7.275c0-1.33,0-1.33,0-1.33c-0.541-1.276,0.799-4.135,2.984-6.358c2.18-2.223,4.98-3.627,6.219-3.12c0,0,0,0,1.281,0c4.016,0,7.279-3.266,7.279-7.276C114.799,121.937,111.535,118.671,107.52,118.671z"/><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M99.381,91.695c0-4.011-3.264-7.277-7.277-7.277c-1.318,0-5.445-0.812-7.672-2.999c-2.221-2.183-3.135-6.211-3.135-7.485c0-4.011-3.266-7.277-7.277-7.277c-4.016,0-7.277,3.267-7.277,7.277c0,4.013,3.262,7.278,7.277,7.278c1.328,0,5.469,0.799,7.689,2.979c2.219,2.183,3.117,6.222,3.117,7.505c0,4.013,3.266,7.275,7.277,7.275C96.117,98.971,99.381,95.708,99.381,91.695z"/><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M133.752,126.066c0-4.013-3.262-7.278-7.271-7.278c-1.322,0-5.449-0.812-7.676-2.996c-2.225-2.187-3.137-6.214-3.137-7.487c0-4.013-3.266-7.278-7.275-7.278c-4.014,0-7.279,3.266-7.279,7.278c0,4.015,3.266,7.277,7.279,7.277c1.326,0,5.467,0.799,7.686,2.982c2.223,2.181,3.123,6.221,3.123,7.502c0,4.015,3.264,7.276,7.279,7.276C130.49,133.343,133.752,130.081,133.752,126.066z"/><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M97.65,127.056c0-4.012-3.264-7.277-7.277-7.277c-1.32,0-5.449-0.813-7.672-2.996c-2.223-2.187-3.137-6.215-3.137-7.488c0-4.012-3.264-7.278-7.275-7.278c-4.014,0-7.277,3.267-7.277,7.278c0,4.011,3.264,7.278,7.277,7.278c1.328,0,5.467,0.798,7.686,2.981c2.223,2.183,3.121,6.221,3.121,7.502c0,4.012,3.268,7.278,7.277,7.278C94.387,134.334,97.65,131.067,97.65,127.056z"/><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M134.248,90.459c0-4.012-3.264-7.277-7.275-7.277c-1.32,0-5.447-0.815-7.674-2.999c-2.225-2.184-3.135-6.212-3.135-7.485c0-4.012-3.266-7.278-7.277-7.278s-7.277,3.267-7.277,7.278c0,4.011,3.266,7.278,7.277,7.278c1.328,0,5.467,0.798,7.688,2.978c2.223,2.187,3.119,6.223,3.119,7.506c0,4.012,3.266,7.274,7.279,7.274C130.984,97.733,134.248,94.471,134.248,90.459z"/></g></svg>';case"seal":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><path fill="rgba('+e+", "+n+", "+r+","+o+')" d="M114.785,171.178L100,137.172l-14.787,34.005l0.322-37.075l-27.333,25.041l15.371-33.735l-35.165,11.765L66.184,112.6 l-36.919-3.562l35.372-11.14L32.361,79.633l36.845,4.206l-22.05-29.817l31.945,18.827L71.07,36.653l21.539,30.179l7.389-36.34 l7.398,36.34l21.529-30.179l-8.021,36.196l31.953-18.832l-22.062,29.821l36.85-4.206L135.37,97.897l35.362,11.14l-36.916,3.562 l27.773,24.572l-35.163-11.765l15.372,33.735l-27.336-25.041L114.785,171.178z M91.655,120.357l-0.186,21.386L100,122.125 l8.529,19.617l-0.186-21.384l15.772,14.448l-8.871-19.468l20.282,6.786l-16.02-14.172l21.291-2.055l-20.396-6.425l18.615-10.534 l-21.254,2.425l12.725-17.198l-18.428,10.861l4.629-20.892l-12.42,17.411l-4.268-20.959L95.74,81.547L83.313,64.136l4.635,20.893 L69.513,74.162l12.721,17.202L60.99,88.939l18.615,10.534l-20.4,6.425l21.288,2.055l-16.02,14.172l20.281-6.786l-8.87,19.468 L91.655,120.357z"/></svg>';case"circleslash":return'<svg version="1.1" id="Your_Icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"><g> <defs> <circle id="SVGID_1_" cx="106" cy="96" r="55"/> </defs> <clipPath id="SVGID_2_"> <use xlink:href="#SVGID_1_"  overflow="visible"/> </clipPath> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="62.944" y="-32.696" transform="matrix(0.7072 0.707 -0.707 0.7072 64.7871 -26.4693)" clip-path="url(#SVGID_2_)" width="2.814" height="195.359"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="69.481" y="-26.157" transform="matrix(0.7068 0.7074 -0.7074 0.7068 71.3731 -29.1772)" clip-path="url(#SVGID_2_)" width="2.814" height="195.357"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="76.018" y="-19.619" transform="matrix(0.7069 0.7073 -0.7073 0.7069 77.9011 -31.8846)" clip-path="url(#SVGID_2_)" width="2.814" height="195.358"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="82.556" y="-13.081" transform="matrix(0.7069 0.7073 -0.7073 0.7069 84.441 -34.5925)" clip-path="url(#SVGID_2_)" width="2.814" height="195.358"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="89.093" y="-6.544" transform="matrix(0.7068 0.7074 -0.7074 0.7068 90.996 -37.2999)" clip-path="url(#SVGID_2_)" width="2.814" height="195.357"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="95.631" y="-0.007" transform="matrix(0.7069 0.7073 -0.7073 0.7069 97.5205 -40.0089)" clip-path="url(#SVGID_2_)" width="2.815" height="195.358"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="102.168" y="6.531" transform="matrix(0.7069 0.7073 -0.7073 0.7069 104.0597 -42.7162)" clip-path="url(#SVGID_2_)" width="2.814" height="195.358"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="108.706" y="13.068" transform="matrix(0.7069 0.7073 -0.7073 0.7069 110.5993 -45.4245)" clip-path="url(#SVGID_2_)" width="2.814" height="195.357"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="115.242" y="19.606" transform="matrix(0.7068 0.7074 -0.7074 0.7068 117.1593 -48.132)" clip-path="url(#SVGID_2_)" width="2.815" height="195.357"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="121.78" y="26.143" transform="matrix(0.7069 0.7073 -0.7073 0.7069 123.6781 -50.8401)" clip-path="url(#SVGID_2_)" width="2.814" height="195.357"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="128.318" y="32.681" transform="matrix(0.7071 0.7071 -0.7071 0.7071 130.1735 -53.5478)" clip-path="url(#SVGID_2_)" width="2.813" height="195.358"/> <rect fill="rgba('+e+", "+n+", "+r+","+o+')" x="134.856" y="39.217" transform="matrix(0.7075 0.7067 -0.7067 0.7075 136.5923 -56.2565)" clip-path="url(#SVGID_2_)" width="2.814" height="195.359"/></g></svg>'}}var i=this;if(e=t.BaseBrush2D.prototype.draw.call(this,e),null!==this.variant&&"string"==typeof this.variant&&(this.variant!==this._lastVariant||!this.color.isEqual(this._lastColor))){if(-1===this.variants.indexOf(this.variant))throw new Error("BB.ImageBrush2D draw: "+this.variant+" is not a valid variant for BB.ImageBrush2D");var s=this.variant;this.src="data:image/svg+xml;base64,"+window.btoa(n()),this.variant=s,this._lastVariant=this.variant,this._lastColor.copy(this.color)}o||console.error("BB.ImageBrush2D draw: you are attempting to draw an image brush without first setting its source with the .src property"),!this.hidden&&r&&(e.save(),e.translate(this.x,this.y),e.rotate(t.MathUtils.degToRad(this.rotation)),e.drawImage(this._image,-this.width/2,-this.height/2,this.width,this.height),e.restore())},t.ImageBrush2D}),n("BB.LineBrush2D",["./BB","./BB.BaseBrush2D","./BB.Color","./BB.MathUtils"],function(t,e,n,i){"use strict";t.BaseBrush2D=e,t.Color=n,t.MathUtils=i;var r=!1;return t.LineBrush2D=function(e){t.BaseBrush2D.call(this,e),this.prevX=null,this.prevY=null,this.type="line",this.variant="solid",this.weight=1,this.variants=["solid","soft","lines","calligraphy"],this._lineStartedThisFrame=!this.hidden,e&&("string"==typeof e.variant&&(this.variant=e.variant),"number"==typeof e.weight&&(this.weight=e.weight))},t.LineBrush2D.prototype=Object.create(t.BaseBrush2D.prototype),t.LineBrush2D.prototype.constructor=t.LineBrush2D,t.LineBrush2D.prototype.update=function(e){t.BaseBrush2D.prototype.update.call(this,e),e.hasOwnProperty("isDown")?(r=!0,this.hidden=e.isDown===!1):r=!1},t.LineBrush2D.prototype.draw=function(e){if(e=t.BaseBrush2D.prototype.draw.call(this,e),e.save(),e.lineJoin="round",e.lineCap="round","string"!=typeof this.variant||-1===this.variants.indexOf(this.variant))throw new Error("BB.BaseBrush2D.draw: "+this.variant+" is not a valid variant for BB.ImageBrush2D");if(this.hidden)this._lineStartedThisFrame=!0;else if(r)if(this._lineStartedThisFrame)e.beginPath(),e.moveTo(this.x,this.y),this._lineStartedThisFrame=!1;else{var n,i,o,s;if(this.color&&this.color instanceof t.Color?(n=this.color.r,i=this.color.g,o=this.color.b,s=t.MathUtils.map(this.color.a,0,255,0,1)):(n=255,i=255,o=255,s=1),"solid"==this.variant){var a=this.prevX>this.x?this.prevX-this.x:this.x-this.prevX,c=this.prevY>this.y?this.prevY-this.y:this.y-this.prevY;this.weight=Math.abs(a-c),this.weight>100&&(this.weight=100),e.lineWidth=t.MathUtils.map(this.weight,0,100,this.width/2.5,2.5*this.width),e.lineTo(this.x,this.y),e.strokeStyle="rgba("+n+", "+i+", "+o+", "+s+")",e.stroke(),e.closePath(),e.beginPath(),e.moveTo(this.x,this.y)}else if("soft"==this.variant)for(var u=t.MathUtils.dist(this.prevX,this.prevY,this.x,this.y),h=t.MathUtils.angleBtw(this.prevX,this.prevY,this.x,this.y),l=0;u>l;l++){var p=this.prevX+Math.sin(h)*l,f=this.prevY+Math.cos(h)*l,d=e.createRadialGradient(p,f,this.width/6,p,f,this.width/2);d.addColorStop(0,"rgba("+n+", "+i+", "+o+", 0.1)"),d.addColorStop(1,"rgba("+n+", "+i+", "+o+", 0)"),e.fillStyle=d,e.fillRect(p-this.width/2,f-this.width/2,this.width,this.width)}else("lines"==this.variant||"calligraphy"==this.variant)&&("lines"==this.variant&&(e.lineWidth=this.width<1?1:.05*this.width),"calligraphy"==this.variant&&(e.lineWidth=.25*this.width),e.strokeStyle="rgb("+n+", "+i+", "+o+")",e.moveTo(this.prevX,this.prevY),e.lineTo(this.x,this.y),e.stroke(),e.moveTo(this.prevX-.2*this.width,this.prevY-.2*this.width),e.lineTo(this.x-.2*this.width,this.y-.2*this.width),e.stroke(),e.moveTo(this.prevX-.1*this.width,this.prevY-.1*this.width),e.lineTo(this.x-.1*this.width,this.y-.1*this.width),e.stroke(),e.moveTo(this.prevX+.1*this.width,this.prevY+.1*this.width),e.lineTo(this.x+.1*this.width,this.y+.1*this.width),e.stroke(),e.moveTo(this.prevX+.2*this.width,this.prevY+.2*this.width),e.lineTo(this.x+.2*this.width,this.y+.2*this.width),e.stroke())}e.restore(),this.prevX=this.x,this.prevY=this.y},t.LineBrush2D}),function(t,n,i){function r(i,s){if(!n[i]){if(!t[i]){var a="function"==typeof e&&e;if(!s&&a)return a(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return r(n?n:e)},c,c.exports)}return n[i].exports}for(var o="function"==typeof e&&e,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){var i=(t("./pointable"),t("gl-matrix")),r=i.vec3,o=i.mat3,s=i.mat4,a=(t("underscore"),e.exports=function(t,e){this.finger=t,this._center=null,this._matrix=null,this.type=e.type,this.prevJoint=e.prevJoint,this.nextJoint=e.nextJoint,this.width=e.width;var n=new Array(3);r.sub(n,e.nextJoint,e.prevJoint),this.length=r.length(n),this.basis=e.basis});a.prototype.left=function(){return this._left?this._left:(this._left=o.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))<0,this._left)},a.prototype.matrix=function(){if(this._matrix)return this._matrix;var t=this.basis,e=this._matrix=s.create();return e[0]=t[0][0],e[1]=t[0][1],e[2]=t[0][2],e[4]=t[1][0],e[5]=t[1][1],e[6]=t[1][2],e[8]=t[2][0],e[9]=t[2][1],e[10]=t[2][2],e[3]=this.center()[0],e[7]=this.center()[1],e[11]=this.center()[2],this.left()&&(e[0]*=-1,e[1]*=-1,e[2]*=-1),this._matrix},a.prototype.lerp=function(t,e){r.lerp(t,this.prevJoint,this.nextJoint,e)},a.prototype.center=function(){if(this._center)return this._center;var t=r.create();return this.lerp(t,.5),this._center=t,t},a.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],-1*this.basis[2][2]]}},{"./pointable":14,"gl-matrix":23,underscore:24}],2:[function(t,e,n){var i=e.exports=function(t){this.pos=0,this._buf=[],this.size=t};i.prototype.get=function(t){return void 0==t&&(t=0),t>=this.size||t>=this._buf.length?void 0:this._buf[(this.pos-t-1)%this.size]},i.prototype.push=function(t){return this._buf[this.pos%this.size]=t,this.pos++}},{}],3:[function(t,e,n){var i=t("../protocol").chooseProtocol,r=t("events").EventEmitter,o=t("underscore"),s=e.exports=function(t){this.opts=o.defaults(t||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:s.defaultProtocolVersion}),this.host=this.opts.host,this.port=this.opts.port,this.scheme=this.opts.scheme,this.protocolVersionVerified=!1,this.background=null,this.optimizeHMD=null,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),this.setBackground(this.opts.background),this.setOptimizeHMD(this.opts.optimizeHMD),this.opts.optimizeHMD?console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")})};s.defaultProtocolVersion=6,s.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},s.prototype.getScheme=function(){return"ws:"},s.prototype.getPort=function(){return 6437},s.prototype.setBackground=function(t){this.opts.background=t,this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=this.opts.background,this.protocol.sendBackground(this,this.opts.background))},s.prototype.setOptimizeHMD=function(t){this.opts.optimizeHMD=t,this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD))},s.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))},s.prototype.enableGestures=function(t){this.gesturesEnabled=t?!0:!1,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},s.prototype.handleClose=function(t,e){this.connected&&(this.disconnect(),1001===t&&this.opts.requestProtocolVersion>1&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())},s.prototype.startReconnection=function(){var t=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){t.reconnect()},500))},s.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)},s.prototype.disconnect=function(t){return t||this.stopReconnection(),this.socket?(this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),!0):void 0},s.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())},s.prototype.handleData=function(t){var e,n=JSON.parse(t);void 0===this.protocol?(e=this.protocol=i(n),this.protocolVersionVerified=!0,this.emit("ready")):e=this.protocol(n),this.emit(e.type,e)},s.prototype.connect=function(){return this.socket?void 0:(this.socket=this.setupSocket(),!0)},s.prototype.send=function(t){this.socket.send(t)},s.prototype.reportFocus=function(t){this.connected&&this.focusedState!==t&&(this.focusedState=t,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))},o.extend(s.prototype,r.prototype)},{"../protocol":15,events:21,underscore:24}],4:[function(t,e,n){var i=e.exports=t("./base"),r=t("underscore"),o=e.exports=function(t){i.call(this,t);var e=this;this.on("ready",function(){e.startFocusLoop()}),this.on("disconnect",function(){e.stopFocusLoop()})};r.extend(o.prototype,i.prototype),o.__proto__=i,o.prototype.useSecure=function(){return"https:"===location.protocol},o.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"},o.prototype.getPort=function(){return this.useSecure()?6436:6437},o.prototype.setupSocket=function(){var t=this,e=new WebSocket(this.getUrl());return e.onopen=function(){t.handleOpen()},e.onclose=function(e){t.handleClose(e.code,e.reason)},e.onmessage=function(e){t.handleData(e.data)},e.onerror=function(e){t.useSecure()&&"wss:"===t.scheme&&(t.scheme="ws:",t.port=6437,t.disconnect(),t.connect())},e},o.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var t=this,e=null;e="undefined"!=typeof document.hidden?"hidden":"undefined"!=typeof document.mozHidden?"mozHidden":"undefined"!=typeof document.msHidden?"msHidden":"undefined"!=typeof document.webkitHidden?"webkitHidden":void 0,void 0===t.windowVisible&&(t.windowVisible=void 0===e?!0:document[e]===!1);var n=window.addEventListener("focus",function(e){t.windowVisible=!0,r()}),i=window.addEventListener("blur",function(e){t.windowVisible=!1,r()});this.on("disconnect",function(){window.removeEventListener("focus",n),window.removeEventListener("blur",i)});var r=function(){var n=void 0===e?!0:document[e]===!1;t.reportFocus(n&&t.windowVisible)};r(),this.focusDetectorTimer=setInterval(r,100)}},o.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{"./base":3,underscore:24}],5:[function(t,e,n){var i=t("__browserify_process"),r=t("./frame"),o=t("./hand"),s=t("./pointable"),a=t("./finger"),c=t("./circular_buffer"),u=t("./pipeline"),h=t("events").EventEmitter,l=t("./gesture").gestureListener,p=t("./dialog"),f=t("underscore"),d=e.exports=function(e){var n="undefined"!=typeof i&&i.versions&&i.versions.node,o=this;e=f.defaults(e||{},{inNode:n}),this.inNode=e.inNode,e=f.defaults(e||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,checkVersion:!0}),this.animationFrameRequested=!1,this.onAnimationFrame=function(t){o.lastConnectionFrame.valid&&o.emit("animationFrame",o.lastConnectionFrame),o.emit("frameEnd",t),o.loopWhileDisconnected&&(o.connection.focusedState!==!1||o.connection.opts.background)?window.requestAnimationFrame(o.onAnimationFrame):o.animationFrameRequested=!1},this.suppressAnimationLoop=e.suppressAnimationLoop,this.loopWhileDisconnected=e.loopWhileDisconnected,this.frameEventName=e.frameEventName,this.useAllPlugins=e.useAllPlugins,this.history=new c(200),this.lastFrame=r.Invalid,this.lastValidFrame=r.Invalid,this.lastConnectionFrame=r.Invalid,this.accumulatedGestures=[],this.checkVersion=e.checkVersion,void 0===e.connectionType?this.connectionType=t(this.inBrowser()?"./connection/browser":"./connection/node"):this.connectionType=e.connectionType,this.connection=new this.connectionType(e),this.streamingCount=0,this.devices={},this.plugins={},this._pluginPipelineSteps={},this._pluginExtendedMethods={},e.useAllPlugins&&this.useRegisteredPlugins(),this.setupFrameEvents(e),this.setupConnectionEvents(),this.startAnimationLoop()};d.prototype.gesture=function(t,e){var n=l(this,t);return void 0!==e&&n.stop(e),n},d.prototype.setBackground=function(t){return this.connection.setBackground(t),this},d.prototype.setOptimizeHMD=function(t){return this.connection.setOptimizeHMD(t),this},d.prototype.inBrowser=function(){return!this.inNode},d.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()},d.prototype.inBackgroundPage=function(){return"undefined"!=typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window},d.prototype.connect=function(){return this.connection.connect(),this},d.prototype.streaming=function(){return this.streamingCount>0},d.prototype.connected=function(){return!!this.connection.connected},d.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))},d.prototype.disconnect=function(){return this.connection.disconnect(),this},d.prototype.frame=function(t){return this.history.get(t)||r.Invalid},d.prototype.loop=function(t){return t&&("function"==typeof t?this.on(this.frameEventName,t):this.setupFrameEvents(t)),this.connect()},d.prototype.addStep=function(t){this.pipeline||(this.pipeline=new u(this)),this.pipeline.addStep(t)},d.prototype.processFrame=function(t){t.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(t.gestures)),this.lastConnectionFrame=t,this.startAnimationLoop(),this.emit("deviceFrame",t)},d.prototype.processFinishedFrame=function(t){if(this.lastFrame=t,t.valid&&(this.lastValidFrame=t),t.controller=this,t.historyIdx=this.history.push(t),t.gestures){t.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var e=0;e!=t.gestures.length;e++)this.emit("gesture",t.gestures[e],t)}this.pipeline&&(t=this.pipeline.run(t),t||(t=r.Invalid)),this.emit("frame",t),this.emitHandEvents(t)},d.prototype.emitHandEvents=function(t){for(var e=0;e<t.hands.length;e++)this.emit("hand",t.hands[e])},d.prototype.setupFrameEvents=function(t){t.frame&&this.on("frame",t.frame),t.hand&&this.on("hand",t.hand)},d.prototype.setupConnectionEvents=function(){var t=this;this.connection.on("frame",function(e){t.processFrame(e)}),this.on(this.frameEventName,function(e){t.processFinishedFrame(e)});var e=function(){if(t.connection.opts.requestProtocolVersion<5&&0==t.streamingCount){t.streamingCount=1;var n={attached:!0,streaming:!0,type:"unknown",id:"Lx00000000000"};t.devices[n.id]=n,t.emit("deviceAttached",n),t.emit("deviceStreaming",n),t.emit("streamingStarted",n),t.connection.removeListener("frame",e)}},n=function(){if(t.streamingCount>0){for(var e in t.devices)t.emit("deviceStopped",t.devices[e]),t.emit("deviceRemoved",t.devices[e]);t.emit("streamingStopped",t.devices[e]),t.streamingCount=0;for(var e in t.devices)delete t.devices[e]}};this.connection.on("focus",function(){t.loopWhileDisconnected&&t.startAnimationLoop(),t.emit("focus")}),this.connection.on("blur",function(){t.emit("blur")}),this.connection.on("protocol",function(e){e.on("beforeFrameCreated",function(e){t.emit("beforeFrameCreated",e)}),e.on("afterFrameCreated",function(e,n){t.emit("afterFrameCreated",e,n)}),t.emit("protocol",e)}),this.connection.on("ready",function(){t.checkVersion&&!t.inNode&&t.checkOutOfDate(),t.emit("ready")}),this.connection.on("connect",function(){t.emit("connect"),t.connection.removeListener("frame",e),t.connection.on("frame",e)}),this.connection.on("disconnect",function(){t.emit("disconnect"),n()}),this.connection.on("deviceConnect",function(i){i.state?(t.emit("deviceConnected"),t.connection.removeListener("frame",e),t.connection.on("frame",e)):(t.emit("deviceDisconnected"),n())}),this.connection.on("deviceEvent",function(e){var n=e.state,i=t.devices[n.id],r={};for(var o in n)i&&i.hasOwnProperty(o)&&i[o]==n[o]||(r[o]=!0);t.devices[n.id]=n,r.attached&&t.emit(n.attached?"deviceAttached":"deviceRemoved",n),r.streaming&&(n.streaming?(t.streamingCount++,t.emit("deviceStreaming",n),1==t.streamingCount&&t.emit("streamingStarted",n),r.attached||t.emit("deviceConnected")):r.attached&&n.attached||(t.streamingCount--,t.emit("deviceStopped",n),0==t.streamingCount&&t.emit("streamingStopped",n),t.emit("deviceDisconnected")))}),this.on("newListener",function(t,e){("deviceConnected"==t||"deviceDisconnected"==t)&&console.warn(t+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})},d.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var t=this.connection.protocol.serviceVersion,e=this.connection.protocol.version,n=this.connectionType.defaultProtocolVersion;return n>e?(console.warn("Your Protocol Version is v"+e+", this app was designed for v"+n),p.warnOutOfDate({sV:t,pV:e}),!0):!1},d._pluginFactories={},d.plugin=function(t,e){return this._pluginFactories[t]&&console.warn('Plugin "'+t+'" already registered'),this._pluginFactories[t]=e},d.plugins=function(){return f.keys(this._pluginFactories)};var m=function(t,e,n){-1!=["beforeFrameCreated","afterFrameCreated"].indexOf(e)?this.on(e,n):(this.pipeline||(this.pipeline=new u(this)),this._pluginPipelineSteps[t]||(this._pluginPipelineSteps[t]=[]),this._pluginPipelineSteps[t].push(this.pipeline.addWrappedStep(e,n)))},y=function(t,e,n){var i;switch(this._pluginExtendedMethods[t]||(this._pluginExtendedMethods[t]=[]),e){case"frame":i=r;break;case"hand":i=o;break;case"pointable":i=s,f.extend(a.prototype,n),f.extend(a.Invalid,n);break;case"finger":i=a;break;default:throw t+' specifies invalid object type "'+e+'" for prototypical extension'}f.extend(i.prototype,n),f.extend(i.Invalid,n),this._pluginExtendedMethods[t].push([i,n])};d.prototype.use=function(t,e){var n,i,r,o;if(i="function"==typeof t?t:d._pluginFactories[t],!i)throw"Leap Plugin "+t+" not found.";if(e||(e={}),this.plugins[t])return f.extend(this.plugins[t],e),this;this.plugins[t]=e,o=i.call(this,e);for(r in o)n=o[r],"function"==typeof n?m.call(this,t,r,n):y.call(this,t,r,n);return this},d.prototype.stopUsing=function(t){var e,n,i=this._pluginPipelineSteps[t],r=this._pluginExtendedMethods[t],o=0;if(this.plugins[t]){if(i)for(o=0;o<i.length;o++)this.pipeline.removeStep(i[o]);if(r)for(o=0;o<r.length;o++){e=r[o][0],n=r[o][1];for(var s in n)delete e.prototype[s],delete e.Invalid[s]}return delete this.plugins[t],this}},d.prototype.useRegisteredPlugins=function(){for(var t in d._pluginFactories)this.use(t)},f.extend(d.prototype,h.prototype)},{"./circular_buffer":2,"./connection/browser":4,"./connection/node":20,"./dialog":6,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./pipeline":13,"./pointable":14,__browserify_process:22,events:21,underscore:24}],6:[function(t,e,n){var i=t("__browserify_process"),r=e.exports=function(t,e){this.options=e||{},this.message=t,this.createElement()};r.prototype.createElement=function(){this.element=document.createElement("div"),this.element.className="leapjs-dialog",this.element.style.position="fixed",this.element.style.top="8px",this.element.style.left=0,this.element.style.right=0,this.element.style.textAlign="center",this.element.style.zIndex=1e3;var t=document.createElement("div");this.element.appendChild(t),t.style.className="leapjs-dialog",t.style.display="inline-block",t.style.margin="auto",t.style.padding="8px",t.style.color="#222",t.style.background="#eee",t.style.borderRadius="4px",t.style.border="1px solid #999",t.style.textAlign="left",t.style.cursor="pointer",t.style.whiteSpace="nowrap",t.style.transition="box-shadow 1s linear",t.innerHTML=this.message,this.options.onclick&&t.addEventListener("click",this.options.onclick),this.options.onmouseover&&t.addEventListener("mouseover",this.options.onmouseover),this.options.onmouseout&&t.addEventListener("mouseout",this.options.onmouseout),this.options.onmousemove&&t.addEventListener("mousemove",this.options.onmousemove)},r.prototype.show=function(){return document.body.appendChild(this.element),this},r.prototype.hide=function(){return document.body.removeChild(this.element),this},r.warnOutOfDate=function(t){t||(t={});var e="http://developer.leapmotion.com?";t.returnTo=window.location.href;for(var n in t)e+=n+"="+encodeURIComponent(t[n])+"&";var i,o=function(t){if("leapjs-decline-upgrade"!=t.target.id){var n=window.open(e,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1");window.focus&&n.focus()}return i.hide(),!0},s="This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>";return i=new r(s,{onclick:o,onmousemove:function(t){t.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",
document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}}),i.show()},r.hasWarnedBones=!1,r.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),"undefined"!=typeof i&&i.versions&&i.versions.node||this.warnOutOfDate({reason:"bones"}))}},{__browserify_process:22}],7:[function(t,e,n){var i=t("./pointable"),r=t("./bone"),o=t("./dialog"),s=t("underscore"),a=e.exports=function(t){i.call(this,t),this.dipPosition=t.dipPosition,this.pipPosition=t.pipPosition,this.mcpPosition=t.mcpPosition,this.carpPosition=t.carpPosition,this.extended=t.extended,this.type=t.type,this.finger=!0,this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition],t.bases?this.addBones(t):o.warnBones()};s.extend(a.prototype,i.prototype),a.prototype.addBones=function(t){this.metacarpal=new r(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:t.bases[0]}),this.proximal=new r(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:t.bases[1]}),this.medial=new r(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:t.bases[2]}),this.distal=new r(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:t.btipPosition,basis:t.bases[3]}),this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]},a.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},a.Invalid={valid:!1}},{"./bone":1,"./dialog":6,"./pointable":14,underscore:24}],8:[function(t,e,n){var i=t("./hand"),r=t("./pointable"),o=t("./gesture").createGesture,s=t("gl-matrix"),a=s.mat3,c=s.vec3,u=t("./interaction_box"),h=t("./finger"),l=t("underscore"),p=e.exports=function(t){if(this.valid=!0,this.id=t.id,this.timestamp=t.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],t.interactionBox&&(this.interactionBox=new u(t.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=t.t,this._rotation=l.flatten(t.r),this._scaleFactor=t.s,this.data=t,this.type="frame",this.currentFrameRate=t.currentFrameRate,t.gestures)for(var e=0,n=t.gestures.length;e!=n;e++)this.gestures.push(o(t.gestures[e]));this.postprocessData(t)};p.prototype.postprocessData=function(t){t||(t=this.data);for(var e=0,n=t.hands.length;e!=n;e++){var o=new i(t.hands[e]);o.frame=this,this.hands.push(o),this.handsMap[o.id]=o}t.pointables=l.sortBy(t.pointables,function(t){return t.id});for(var s=0,a=t.pointables.length;s!=a;s++){var c=t.pointables[s],u=c.dipPosition?new h(c):new r(c);u.frame=this,this.addPointable(u)}},p.prototype.addPointable=function(t){if(this.pointables.push(t),this.pointablesMap[t.id]=t,(t.tool?this.tools:this.fingers).push(t),void 0!==t.handId&&this.handsMap.hasOwnProperty(t.handId)){var e=this.handsMap[t.handId];switch(e.pointables.push(t),(t.tool?e.tools:e.fingers).push(t),t.type){case 0:e.thumb=t;break;case 1:e.indexFinger=t;break;case 2:e.middleFinger=t;break;case 3:e.ringFinger=t;break;case 4:e.pinky=t}}},p.prototype.tool=function(t){var e=this.pointable(t);return e.tool?e:r.Invalid},p.prototype.pointable=function(t){return this.pointablesMap[t]||r.Invalid},p.prototype.finger=function(t){var e=this.pointable(t);return e.tool?r.Invalid:e},p.prototype.hand=function(t){return this.handsMap[t]||i.Invalid},p.prototype.rotationAngle=function(t,e){if(!this.valid||!t.valid)return 0;var n=this.rotationMatrix(t),i=.5*(n[0]+n[4]+n[8]-1),r=Math.acos(i);if(r=isNaN(r)?0:r,void 0!==e){var o=this.rotationAxis(t);r*=c.dot(o,c.normalize(c.create(),e))}return r},p.prototype.rotationAxis=function(t){return this.valid&&t.valid?c.normalize(c.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):c.create()},p.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return a.create();var e=a.transpose(a.create(),this._rotation);return a.multiply(a.create(),t._rotation,e)},p.prototype.scaleFactor=function(t){return this.valid&&t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},p.prototype.translation=function(t){return this.valid&&t.valid?c.subtract(c.create(),this._translation,t._translation):c.create()},p.prototype.toString=function(){var t="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(t+=" | Gesture count:("+this.gestures.length+")"),t+=" ]"},p.prototype.dump=function(){var t="";t+="Frame Info:<br/>",t+=this.toString(),t+="<br/><br/>Hands:<br/>";for(var e=0,n=this.hands.length;e!=n;e++)t+="  "+this.hands[e].toString()+"<br/>";t+="<br/><br/>Pointables:<br/>";for(var i=0,r=this.pointables.length;i!=r;i++)t+="  "+this.pointables[i].toString()+"<br/>";if(this.gestures){t+="<br/><br/>Gestures:<br/>";for(var o=0,s=this.gestures.length;o!=s;o++)t+="  "+this.gestures[o].toString()+"<br/>"}return t+="<br/><br/>Raw JSON:<br/>",t+=JSON.stringify(this.data)},p.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return r.Invalid},finger:function(){return r.Invalid},hand:function(){return i.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return c.create()},scaleFactor:function(){return 1},translation:function(){return c.create()}}},{"./finger":7,"./gesture":9,"./hand":10,"./interaction_box":12,"./pointable":14,"gl-matrix":23,underscore:24}],9:[function(t,e,n){var i=t("gl-matrix"),r=i.vec3,o=t("events").EventEmitter,s=t("underscore"),a=(n.createGesture=function(t){var e;switch(t.type){case"circle":e=new c(t);break;case"swipe":e=new u(t);break;case"screenTap":e=new h(t);break;case"keyTap":e=new l(t);break;default:throw"unknown gesture type"}return e.id=t.id,e.handIds=t.handIds.slice(),e.pointableIds=t.pointableIds.slice(),e.duration=t.duration,e.state=t.state,e.type=t.type,e},n.gestureListener=function(t,e){var n={},i={};t.on("gesture",function(t,r){if(t.type==e){if(("start"==t.state||"stop"==t.state)&&void 0===i[t.id]){var o=new a(t,r);i[t.id]=o,s.each(n,function(t,e){o.on(e,t)})}i[t.id].update(t,r),"stop"==t.state&&delete i[t.id]}});var r={start:function(t){return n.start=t,r},stop:function(t){return n.stop=t,r},complete:function(t){return n.stop=t,r},update:function(t){return n.update=t,r}};return r},n.Gesture=function(t,e){this.gestures=[t],this.frames=[e]});a.prototype.update=function(t,e){this.lastGesture=t,this.lastFrame=e,this.gestures.push(t),this.frames.push(e),this.emit(t.state,this)},a.prototype.translation=function(){return r.subtract(r.create(),this.lastGesture.startPosition,this.lastGesture.position)},s.extend(a.prototype,o.prototype);var c=function(t){this.center=t.center,this.normal=t.normal,this.progress=t.progress,this.radius=t.radius};c.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var u=function(t){this.startPosition=t.startPosition,this.position=t.position,this.direction=t.direction,this.speed=t.speed};u.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var h=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};h.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var l=function(t){this.position=t.position,this.direction=t.direction,this.progress=t.progress};l.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{events:21,"gl-matrix":23,underscore:24}],10:[function(t,e,n){var i=t("./pointable"),r=t("./bone"),o=t("gl-matrix"),s=o.mat3,a=o.vec3,c=t("underscore"),u=e.exports=function(t){this.id=t.id,this.palmPosition=t.palmPosition,this.direction=t.direction,this.palmVelocity=t.palmVelocity,this.palmNormal=t.palmNormal,this.sphereCenter=t.sphereCenter,this.sphereRadius=t.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],t.armBasis?this.arm=new r(this,{type:4,width:t.armWidth,prevJoint:t.elbow,nextJoint:t.wrist,basis:t.armBasis}):this.arm=null,this.tools=[],this._translation=t.t,this._rotation=c.flatten(t.r),this._scaleFactor=t.s,this.timeVisible=t.timeVisible,this.stabilizedPalmPosition=t.stabilizedPalmPosition,this.type=t.type,this.grabStrength=t.grabStrength,this.pinchStrength=t.pinchStrength,this.confidence=t.confidence};u.prototype.finger=function(t){var e=this.frame.finger(t);return e&&e.handId==this.id?e:i.Invalid},u.prototype.rotationAngle=function(t,e){if(!this.valid||!t.valid)return 0;var n=t.hand(this.id);if(!n.valid)return 0;var i=this.rotationMatrix(t),r=.5*(i[0]+i[4]+i[8]-1),o=Math.acos(r);if(o=isNaN(o)?0:o,void 0!==e){var s=this.rotationAxis(t);o*=a.dot(s,a.normalize(a.create(),e))}return o},u.prototype.rotationAxis=function(t){if(!this.valid||!t.valid)return a.create();var e=t.hand(this.id);return e.valid?a.normalize(a.create(),[this._rotation[7]-e._rotation[5],this._rotation[2]-e._rotation[6],this._rotation[3]-e._rotation[1]]):a.create()},u.prototype.rotationMatrix=function(t){if(!this.valid||!t.valid)return s.create();var e=t.hand(this.id);if(!e.valid)return s.create();var n=s.transpose(s.create(),this._rotation),i=s.multiply(s.create(),e._rotation,n);return i},u.prototype.scaleFactor=function(t){if(!this.valid||!t.valid)return 1;var e=t.hand(this.id);return e.valid?Math.exp(this._scaleFactor-e._scaleFactor):1},u.prototype.translation=function(t){if(!this.valid||!t.valid)return a.create();var e=t.hand(this.id);return e.valid?[this._translation[0]-e._translation[0],this._translation[1]-e._translation[1],this._translation[2]-e._translation[2]]:a.create()},u.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},u.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])},u.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])},u.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])},u.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return i.Invalid},finger:function(){return i.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return s.create()},rotationAxis:function(){return a.create()},scaleFactor:function(){return 1},translation:function(){return a.create()}}},{"./bone":1,"./pointable":14,"gl-matrix":23,underscore:24}],11:[function(t,e,n){e.exports={Controller:t("./controller"),Frame:t("./frame"),Gesture:t("./gesture"),Hand:t("./hand"),Pointable:t("./pointable"),Finger:t("./finger"),InteractionBox:t("./interaction_box"),CircularBuffer:t("./circular_buffer"),UI:t("./ui"),JSONProtocol:t("./protocol").JSONProtocol,glMatrix:t("gl-matrix"),mat3:t("gl-matrix").mat3,vec3:t("gl-matrix").vec3,loopController:void 0,version:t("./version.js"),_:t("underscore"),EventEmitter:t("events").EventEmitter,loop:function(t,e){return t&&void 0===e&&"[object Function]"==={}.toString.call(t)&&(e=t,t={}),this.loopController?t&&this.loopController.setupFrameEvents(t):this.loopController=new this.Controller(t),this.loopController.loop(e),this.loopController},plugin:function(t,e){this.Controller.plugin(t,e)}}},{"./circular_buffer":2,"./controller":5,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./interaction_box":12,"./pointable":14,"./protocol":15,"./ui":16,"./version.js":19,events:21,"gl-matrix":23,underscore:24}],12:[function(t,e,n){var i=t("gl-matrix"),r=i.vec3,o=e.exports=function(t){this.valid=!0,this.center=t.center,this.size=t.size,this.width=t.size[0],this.height=t.size[1],this.depth=t.size[2]};o.prototype.denormalizePoint=function(t){return r.fromValues((t[0]-.5)*this.size[0]+this.center[0],(t[1]-.5)*this.size[1]+this.center[1],(t[2]-.5)*this.size[2]+this.center[2])},o.prototype.normalizePoint=function(t,e){var n=r.fromValues((t[0]-this.center[0])/this.size[0]+.5,(t[1]-this.center[1])/this.size[1]+.5,(t[2]-this.center[2])/this.size[2]+.5);return e&&(n[0]=Math.min(Math.max(n[0],0),1),n[1]=Math.min(Math.max(n[1],0),1),n[2]=Math.min(Math.max(n[2],0),1)),n},o.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},o.Invalid={valid:!1}},{"gl-matrix":23}],13:[function(t,e,n){var i=e.exports=function(t){this.steps=[],this.controller=t};i.prototype.addStep=function(t){this.steps.push(t)},i.prototype.run=function(t){for(var e=this.steps.length,n=0;n!=e&&t;n++)t=this.steps[n](t);return t},i.prototype.removeStep=function(t){var e=this.steps.indexOf(t);if(-1===e)throw"Step not found in pipeline";this.steps.splice(e,1)},i.prototype.addWrappedStep=function(t,e){var n=this.controller,i=function(i){var r,o,s;for(r="frame"==t?[i]:i[t+"s"]||[],o=0,s=r.length;s>o;o++)e.call(n,r[o]);return i};return this.addStep(i),i}},{}],14:[function(t,e,n){var i=t("gl-matrix"),r=(i.vec3,e.exports=function(t){this.valid=!0,this.id=t.id,this.handId=t.handId,this.length=t.length,this.tool=t.tool,this.width=t.width,this.direction=t.direction,this.stabilizedTipPosition=t.stabilizedTipPosition,this.tipPosition=t.tipPosition,this.tipVelocity=t.tipVelocity,this.touchZone=t.touchZone,this.touchDistance=t.touchDistance,this.timeVisible=t.timeVisible});r.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"},r.prototype.hand=function(){return this.frame.hand(this.handId)},r.Invalid={valid:!1}},{"gl-matrix":23}],15:[function(t,e,n){var i=t("./frame"),r=(t("./hand"),t("./pointable"),t("./finger"),t("underscore")),o=t("events").EventEmitter,s=function(t){this.type=t.type,this.state=t.state};n.chooseProtocol=function(t){var e;switch(t.version){case 1:case 2:case 3:case 4:case 5:case 6:e=a(t),e.sendBackground=function(t,n){t.send(e.encode({background:n}))},e.sendFocused=function(t,n){t.send(e.encode({focused:n}))},e.sendOptimizeHMD=function(t,n){t.send(e.encode({optimizeHMD:n}))};break;default:throw"unrecognized version"}return e};var a=n.JSONProtocol=function(t){var e=function(t){if(t.event)return new s(t.event);e.emit("beforeFrameCreated",t);var n=new i(t);return e.emit("afterFrameCreated",n,t),n};return e.encode=function(t){return JSON.stringify(t)},e.version=t.version,e.serviceVersion=t.serviceVersion,e.versionLong="Version "+t.version,e.type="protocol",r.extend(e,o.prototype),e}},{"./finger":7,"./frame":8,"./hand":10,"./pointable":14,events:21,underscore:24}],16:[function(t,e,n){n.UI={Region:t("./ui/region"),Cursor:t("./ui/cursor")}},{"./ui/cursor":17,"./ui/region":18}],17:[function(t,e,n){e.exports=function(){return function(t){var e=t.pointables.sort(function(t,e){return t.z-e.z})[0];return e&&e.valid&&(t.cursorPosition=e.tipPosition),t}}},{}],18:[function(t,e,n){var i=t("events").EventEmitter,r=t("underscore"),o=e.exports=function(t,e){this.start=new Vector(t),this.end=new Vector(e),this.enteredFrame=null};o.prototype.hasPointables=function(t){for(var e=0;e!=t.pointables.length;e++){var n=t.pointables[e].tipPosition;if(n.x>=this.start.x&&n.x<=this.end.x&&n.y>=this.start.y&&n.y<=this.end.y&&n.z>=this.start.z&&n.z<=this.end.z)return!0}return!1},o.prototype.listener=function(t){var e=this;return t&&t.nearThreshold&&this.setupNearRegion(t.nearThreshold),function(t){return e.updatePosition(t)}},o.prototype.clipper=function(){var t=this;return function(e){return t.updatePosition(e),t.enteredFrame?e:null}},o.prototype.setupNearRegion=function(t){var e=this.nearRegion=new o([this.start.x-t,this.start.y-t,this.start.z-t],[this.end.x+t,this.end.y+t,this.end.z+t]),n=this;e.on("enter",function(t){n.emit("near",t)}),e.on("exit",function(t){n.emit("far",t)}),n.on("exit",function(t){n.emit("near",t)})},o.prototype.updatePosition=function(t){return this.nearRegion&&this.nearRegion.updatePosition(t),this.hasPointables(t)&&null==this.enteredFrame?(this.enteredFrame=t,this.emit("enter",this.enteredFrame)):this.hasPointables(t)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),t},o.prototype.normalize=function(t){return new Vector([(t.x-this.start.x)/(this.end.x-this.start.x),(t.y-this.start.y)/(this.end.y-this.start.y),(t.z-this.start.z)/(this.end.z-this.start.z)])},o.prototype.mapToXY=function(t,e,n){var i=this.normalize(t),r=i.x,o=i.y;return r>1?r=1:-1>r&&(r=-1),o>1?o=1:-1>o&&(o=-1),[(r+1)/2*e,(1-o)/2*n,i.z]},r.extend(o.prototype,i.prototype)},{events:21,underscore:24}],19:[function(t,e,n){e.exports={full:"0.6.4",major:0,minor:6,dot:4}},{}],20:[function(t,e,n){},{}],21:[function(t,e,n){function i(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}var r=t("__browserify_process");r.EventEmitter||(r.EventEmitter=function(){});var o=n.EventEmitter=r.EventEmitter,s="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=10;o.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},o.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||s(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(s(e)){for(var n=Array.prototype.slice.call(arguments,1),i=e.slice(),r=0,o=i.length;o>r;r++)i[r].apply(this,n);return!0}return!1},o.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(s(this._events[t])){if(!this._events[t].warned){var n;n=void 0!==this._events.maxListeners?this._events.maxListeners:a,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(t,e){var n=this;return n.on(t,function i(){n.removeListener(t,i),e.apply(this,arguments)}),this},o.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var n=this._events[t];if(s(n)){var r=i(n,e);if(0>r)return this;n.splice(r,1),0==n.length&&delete this._events[t]}else this._events[t]===e&&delete this._events[t];return this},o.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},o.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),s(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},o.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?"function"==typeof t._events[e]?1:t._events[e].length:0}},{__browserify_process:22}],22:[function(t,e,n){var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],23:[function(t,e,i){!function(t){"use strict";var e={};"undefined"==typeof i?"function"==typeof n&&"object"==typeof n.amd&&n.amd?(e.exports={},n("../libs/leap-0.6.4",[],function(){return e.exports})):e.exports="undefined"!=typeof window?window:t:e.exports=i,function(t){if(!e)var e=1e-6;if(!n)var n="undefined"!=typeof Float32Array?Float32Array:Array;if(!i)var i=Math.random;var r={};r.setMatrixArrayType=function(t){n=t},"undefined"!=typeof t&&(t.glMatrix=r);var o=Math.PI/180;r.toRadian=function(t){return t*o};var s={};s.create=function(){var t=new n(2);return t[0]=0,t[1]=0,t},s.clone=function(t){var e=new n(2);return e[0]=t[0],e[1]=t[1],e},s.fromValues=function(t,e){var i=new n(2);return i[0]=t,i[1]=e,i},s.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},s.set=function(t,e,n){return t[0]=e,t[1]=n,t},s.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},s.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},s.sub=s.subtract,s.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},s.mul=s.multiply,s.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},s.div=s.divide,s.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},s.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},s.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},s.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},s.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},s.dist=s.distance,s.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i},s.sqrDist=s.squaredDistance,s.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},s.len=s.length,s.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},s.sqrLen=s.squaredLength,s.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},s.normalize=function(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},s.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},s.cross=function(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t},s.lerp=function(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t},s.random=function(t,e){e=e||1;var n=2*i()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},s.transformMat2=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t},s.transformMat2d=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t},s.transformMat3=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t},s.transformMat4=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t},s.forEach=function(){var t=s.create();return function(e,n,i,r,o,s){var a,c;for(n||(n=2),i||(i=0),c=r?Math.min(r*n+i,e.length):e.length,a=i;c>a;a+=n)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}}(),s.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=s);var a={};a.create=function(){var t=new n(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var e=new n(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.fromValues=function(t,e,i){var r=new n(3);return r[0]=t,r[1]=e,r[2]=i,r},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},a.div=a.divide,a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},a.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},a.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},a.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},a.cross=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2];return t[0]=r*c-o*a,t[1]=o*s-i*c,t[2]=i*a-r*s,t},a.lerp=function(t,e,n,i){var r=e[0],o=e[1],s=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t},a.random=function(t,e){e=e||1;var n=2*i()*Math.PI,r=2*i()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t},a.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12],t[1]=n[1]*i+n[5]*r+n[9]*o+n[13],t[2]=n[2]*i+n[6]*r+n[10]*o+n[14],t},a.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t},a.transformQuat=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2],u=n[3],h=u*i+a*o-c*r,l=u*r+c*i-s*o,p=u*o+s*r-a*i,f=-s*i-a*r-c*o;return t[0]=h*u+f*-s+l*-c-p*-a,t[1]=l*u+f*-a+p*-s-h*-c,t[2]=p*u+f*-c+h*-a-l*-s,t},a.rotateX=function(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.rotateY=function(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.rotateZ=function(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.forEach=function(){var t=a.create();return function(e,n,i,r,o,s){var a,c;for(n||(n=3),i||(i=0),c=r?Math.min(r*n+i,e.length):e.length,a=i;c>a;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}(),a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=a);var c={};c.create=function(){var t=new n(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},c.clone=function(t){var e=new n(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},c.fromValues=function(t,e,i,r){var o=new n(4);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o},c.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},c.set=function(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t},c.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},c.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},c.sub=c.subtract,c.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},c.mul=c.multiply,c.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},c.div=c.divide,c.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},c.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},c.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},c.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t},c.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+i*i+r*r+o*o)},c.dist=c.distance,c.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return n*n+i*i+r*r+o*o},c.sqrDist=c.squaredDistance,c.length=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)},c.len=c.length,c.squaredLength=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r},c.sqrLen=c.squaredLength,c.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},c.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s),t},c.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},c.lerp=function(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t[3]=a+i*(n[3]-a),t},c.random=function(t,e){return e=e||1,t[0]=i(),t[1]=i(),t[2]=i(),t[3]=i(),c.normalize(t,t),c.scale(t,t,e),t},c.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t},c.transformQuat=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],c=n[2],u=n[3],h=u*i+a*o-c*r,l=u*r+c*i-s*o,p=u*o+s*r-a*i,f=-s*i-a*r-c*o;return t[0]=h*u+f*-s+l*-c-p*-a,t[1]=l*u+f*-a+p*-s-h*-c,t[2]=p*u+f*-c+h*-a-l*-s,t},c.forEach=function(){var t=c.create();return function(e,n,i,r,o,s){var a,c;for(n||(n=4),i||(i=0),c=r?Math.min(r*n+i,e.length):e.length,a=i;c>a;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}(),c.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=c);var u={};u.create=function(){var t=new n(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},u.clone=function(t){var e=new n(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},u.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},u.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},u.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},u.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*o-r*i;return s?(s=1/s,t[0]=o*s,t[1]=-i*s,t[2]=-r*s,t[3]=n*s,t):null},u.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},u.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},u.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],c=n[1],u=n[2],h=n[3];return t[0]=i*a+o*c,t[1]=r*a+s*c,t[2]=i*u+o*h,t[3]=r*u+s*h,t},u.mul=u.multiply,u.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);return t[0]=i*c+o*a,t[1]=r*c+s*a,t[2]=i*-a+o*c,t[3]=r*-a+s*c,t},u.scale=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],c=n[1];return t[0]=i*a,t[1]=r*a,t[2]=o*c,t[3]=s*c,t},u.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},u.LDU=function(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]},"undefined"!=typeof t&&(t.mat2=u);
var h={};h.create=function(){var t=new n(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},h.clone=function(t){var e=new n(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},h.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},h.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=n*o-i*r;return c?(c=1/c,t[0]=o*c,t[1]=-i*c,t[2]=-r*c,t[3]=n*c,t[4]=(r*a-o*s)*c,t[5]=(i*s-n*a)*c,t):null},h.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},h.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],u=n[0],h=n[1],l=n[2],p=n[3],f=n[4],d=n[5];return t[0]=i*u+o*h,t[1]=r*u+s*h,t[2]=i*l+o*p,t[3]=r*l+s*p,t[4]=i*f+o*d+a,t[5]=r*f+s*d+c,t},h.mul=h.multiply,h.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],u=Math.sin(n),h=Math.cos(n);return t[0]=i*h+o*u,t[1]=r*h+s*u,t[2]=i*-u+o*h,t[3]=r*-u+s*h,t[4]=a,t[5]=c,t},h.scale=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],u=n[0],h=n[1];return t[0]=i*u,t[1]=r*u,t[2]=o*h,t[3]=s*h,t[4]=a,t[5]=c,t},h.translate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],u=n[0],h=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=i*u+o*h+a,t[5]=r*u+s*h+c,t},h.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=h);var l={};l.create=function(){var t=new n(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},l.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},l.clone=function(t){var e=new n(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},l.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},l.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},l.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=h*s-a*u,p=-h*o+a*c,f=u*o-s*c,d=n*l+i*p+r*f;return d?(d=1/d,t[0]=l*d,t[1]=(-h*i+r*u)*d,t[2]=(a*i-r*s)*d,t[3]=p*d,t[4]=(h*n-r*c)*d,t[5]=(-a*n+r*o)*d,t[6]=f*d,t[7]=(-u*n+i*c)*d,t[8]=(s*n-i*o)*d,t):null},l.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],h=e[8];return t[0]=s*h-a*u,t[1]=r*u-i*h,t[2]=i*a-r*s,t[3]=a*c-o*h,t[4]=n*h-r*c,t[5]=r*o-n*a,t[6]=o*u-s*c,t[7]=i*c-n*u,t[8]=n*s-i*o,t},l.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],u=t[8];return e*(u*o-s*c)+n*(-u*r+s*a)+i*(c*r-o*a)},l.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],p=n[0],f=n[1],d=n[2],m=n[3],y=n[4],g=n[5],v=n[6],w=n[7],b=n[8];return t[0]=p*i+f*s+d*u,t[1]=p*r+f*a+d*h,t[2]=p*o+f*c+d*l,t[3]=m*i+y*s+g*u,t[4]=m*r+y*a+g*h,t[5]=m*o+y*c+g*l,t[6]=v*i+w*s+b*u,t[7]=v*r+w*a+b*h,t[8]=v*o+w*c+b*l,t},l.mul=l.multiply,l.translate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],p=n[0],f=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=c,t[6]=p*i+f*s+u,t[7]=p*r+f*a+h,t[8]=p*o+f*c+l,t},l.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],p=Math.sin(n),f=Math.cos(n);return t[0]=f*i+p*s,t[1]=f*r+p*a,t[2]=f*o+p*c,t[3]=f*s-p*i,t[4]=f*a-p*r,t[5]=f*c-p*o,t[6]=u,t[7]=h,t[8]=l,t},l.scale=function(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},l.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},l.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,c=r+r,u=n*s,h=i*s,l=i*a,p=r*s,f=r*a,d=r*c,m=o*s,y=o*a,g=o*c;return t[0]=1-l-d,t[3]=h-g,t[6]=p+y,t[1]=h+g,t[4]=1-u-d,t[7]=f-m,t[2]=p-y,t[5]=f+m,t[8]=1-u-l,t},l.normalFromMat4=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=e[9],p=e[10],f=e[11],d=e[12],m=e[13],y=e[14],g=e[15],v=n*a-i*s,w=n*c-r*s,b=n*u-o*s,B=i*c-r*a,x=i*u-o*a,M=r*u-o*c,_=h*m-l*d,C=h*y-p*d,E=h*g-f*d,D=l*y-p*m,I=l*g-f*m,k=p*g-f*y,S=v*k-w*I+b*D+B*E-x*C+M*_;return S?(S=1/S,t[0]=(a*k-c*I+u*D)*S,t[1]=(c*E-s*k-u*C)*S,t[2]=(s*I-a*E+u*_)*S,t[3]=(r*I-i*k-o*D)*S,t[4]=(n*k-r*E+o*C)*S,t[5]=(i*E-n*I-o*_)*S,t[6]=(m*M-y*x+g*B)*S,t[7]=(y*b-d*M-g*w)*S,t[8]=(d*x-m*b+g*v)*S,t):null},l.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},l.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=l);var p={};p.create=function(){var t=new n(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.clone=function(t){var e=new n(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},p.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},p.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},p.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=e[9],p=e[10],f=e[11],d=e[12],m=e[13],y=e[14],g=e[15],v=n*a-i*s,w=n*c-r*s,b=n*u-o*s,B=i*c-r*a,x=i*u-o*a,M=r*u-o*c,_=h*m-l*d,C=h*y-p*d,E=h*g-f*d,D=l*y-p*m,I=l*g-f*m,k=p*g-f*y,S=v*k-w*I+b*D+B*E-x*C+M*_;return S?(S=1/S,t[0]=(a*k-c*I+u*D)*S,t[1]=(r*I-i*k-o*D)*S,t[2]=(m*M-y*x+g*B)*S,t[3]=(p*x-l*M-f*B)*S,t[4]=(c*E-s*k-u*C)*S,t[5]=(n*k-r*E+o*C)*S,t[6]=(y*b-d*M-g*w)*S,t[7]=(h*M-p*b+f*w)*S,t[8]=(s*I-a*E+u*_)*S,t[9]=(i*E-n*I-o*_)*S,t[10]=(d*x-m*b+g*v)*S,t[11]=(l*b-h*x-f*v)*S,t[12]=(a*C-s*D-c*_)*S,t[13]=(n*D-i*C+r*_)*S,t[14]=(m*w-d*B-y*v)*S,t[15]=(h*B-l*w+p*v)*S,t):null},p.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=e[9],p=e[10],f=e[11],d=e[12],m=e[13],y=e[14],g=e[15];return t[0]=a*(p*g-f*y)-l*(c*g-u*y)+m*(c*f-u*p),t[1]=-(i*(p*g-f*y)-l*(r*g-o*y)+m*(r*f-o*p)),t[2]=i*(c*g-u*y)-a*(r*g-o*y)+m*(r*u-o*c),t[3]=-(i*(c*f-u*p)-a*(r*f-o*p)+l*(r*u-o*c)),t[4]=-(s*(p*g-f*y)-h*(c*g-u*y)+d*(c*f-u*p)),t[5]=n*(p*g-f*y)-h*(r*g-o*y)+d*(r*f-o*p),t[6]=-(n*(c*g-u*y)-s*(r*g-o*y)+d*(r*u-o*c)),t[7]=n*(c*f-u*p)-s*(r*f-o*p)+h*(r*u-o*c),t[8]=s*(l*g-f*m)-h*(a*g-u*m)+d*(a*f-u*l),t[9]=-(n*(l*g-f*m)-h*(i*g-o*m)+d*(i*f-o*l)),t[10]=n*(a*g-u*m)-s*(i*g-o*m)+d*(i*u-o*a),t[11]=-(n*(a*f-u*l)-s*(i*f-o*l)+h*(i*u-o*a)),t[12]=-(s*(l*y-p*m)-h*(a*y-c*m)+d*(a*p-c*l)),t[13]=n*(l*y-p*m)-h*(i*y-r*m)+d*(i*p-r*l),t[14]=-(n*(a*y-c*m)-s*(i*y-r*m)+d*(i*c-r*a)),t[15]=n*(a*p-c*l)-s*(i*p-r*l)+h*(i*c-r*a),t},p.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],c=t[7],u=t[8],h=t[9],l=t[10],p=t[11],f=t[12],d=t[13],m=t[14],y=t[15],g=e*s-n*o,v=e*a-i*o,w=e*c-r*o,b=n*a-i*s,B=n*c-r*s,x=i*c-r*a,M=u*d-h*f,_=u*m-l*f,C=u*y-p*f,E=h*m-l*d,D=h*y-p*d,I=l*y-p*m;return g*I-v*D+w*E+b*C-B*_+x*M},p.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],p=e[9],f=e[10],d=e[11],m=e[12],y=e[13],g=e[14],v=e[15],w=n[0],b=n[1],B=n[2],x=n[3];return t[0]=w*i+b*a+B*l+x*m,t[1]=w*r+b*c+B*p+x*y,t[2]=w*o+b*u+B*f+x*g,t[3]=w*s+b*h+B*d+x*v,w=n[4],b=n[5],B=n[6],x=n[7],t[4]=w*i+b*a+B*l+x*m,t[5]=w*r+b*c+B*p+x*y,t[6]=w*o+b*u+B*f+x*g,t[7]=w*s+b*h+B*d+x*v,w=n[8],b=n[9],B=n[10],x=n[11],t[8]=w*i+b*a+B*l+x*m,t[9]=w*r+b*c+B*p+x*y,t[10]=w*o+b*u+B*f+x*g,t[11]=w*s+b*h+B*d+x*v,w=n[12],b=n[13],B=n[14],x=n[15],t[12]=w*i+b*a+B*l+x*m,t[13]=w*r+b*c+B*p+x*y,t[14]=w*o+b*u+B*f+x*g,t[15]=w*s+b*h+B*d+x*v,t},p.mul=p.multiply,p.translate=function(t,e,n){var i,r,o,s,a,c,u,h,l,p,f,d,m=n[0],y=n[1],g=n[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*g+e[12],t[13]=e[1]*m+e[5]*y+e[9]*g+e[13],t[14]=e[2]*m+e[6]*y+e[10]*g+e[14],t[15]=e[3]*m+e[7]*y+e[11]*g+e[15]):(i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5],u=e[6],h=e[7],l=e[8],p=e[9],f=e[10],d=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=c,t[6]=u,t[7]=h,t[8]=l,t[9]=p,t[10]=f,t[11]=d,t[12]=i*m+a*y+l*g+e[12],t[13]=r*m+c*y+p*g+e[13],t[14]=o*m+u*y+f*g+e[14],t[15]=s*m+h*y+d*g+e[15]),t},p.scale=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},p.rotate=function(t,n,i,r){var o,s,a,c,u,h,l,p,f,d,m,y,g,v,w,b,B,x,M,_,C,E,D,I,k=r[0],S=r[1],P=r[2],A=Math.sqrt(k*k+S*S+P*P);return Math.abs(A)<e?null:(A=1/A,k*=A,S*=A,P*=A,o=Math.sin(i),s=Math.cos(i),a=1-s,c=n[0],u=n[1],h=n[2],l=n[3],p=n[4],f=n[5],d=n[6],m=n[7],y=n[8],g=n[9],v=n[10],w=n[11],b=k*k*a+s,B=S*k*a+P*o,x=P*k*a-S*o,M=k*S*a-P*o,_=S*S*a+s,C=P*S*a+k*o,E=k*P*a+S*o,D=S*P*a-k*o,I=P*P*a+s,t[0]=c*b+p*B+y*x,t[1]=u*b+f*B+g*x,t[2]=h*b+d*B+v*x,t[3]=l*b+m*B+w*x,t[4]=c*M+p*_+y*C,t[5]=u*M+f*_+g*C,t[6]=h*M+d*_+v*C,t[7]=l*M+m*_+w*C,t[8]=c*E+p*D+y*I,t[9]=u*E+f*D+g*I,t[10]=h*E+d*D+v*I,t[11]=l*E+m*D+w*I,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},p.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],c=e[7],u=e[8],h=e[9],l=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+u*i,t[5]=s*r+h*i,t[6]=a*r+l*i,t[7]=c*r+p*i,t[8]=u*r-o*i,t[9]=h*r-s*i,t[10]=l*r-a*i,t[11]=p*r-c*i,t},p.rotateY=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],u=e[8],h=e[9],l=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-u*i,t[1]=s*r-h*i,t[2]=a*r-l*i,t[3]=c*r-p*i,t[8]=o*i+u*r,t[9]=s*i+h*r,t[10]=a*i+l*r,t[11]=c*i+p*r,t},p.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],u=e[4],h=e[5],l=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+u*i,t[1]=s*r+h*i,t[2]=a*r+l*i,t[3]=c*r+p*i,t[4]=u*r-o*i,t[5]=h*r-s*i,t[6]=l*r-a*i,t[7]=p*r-c*i,t},p.fromRotationTranslation=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=i+i,c=r+r,u=o+o,h=i*a,l=i*c,p=i*u,f=r*c,d=r*u,m=o*u,y=s*a,g=s*c,v=s*u;return t[0]=1-(f+m),t[1]=l+v,t[2]=p-g,t[3]=0,t[4]=l-v,t[5]=1-(h+m),t[6]=d+y,t[7]=0,t[8]=p+g,t[9]=d-y,t[10]=1-(h+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},p.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,c=r+r,u=n*s,h=i*s,l=i*a,p=r*s,f=r*a,d=r*c,m=o*s,y=o*a,g=o*c;return t[0]=1-l-d,t[1]=h+g,t[2]=p-y,t[3]=0,t[4]=h-g,t[5]=1-u-d,t[6]=f+m,t[7]=0,t[8]=p+y,t[9]=f-m,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.frustum=function(t,e,n,i,r,o,s){var a=1/(n-e),c=1/(r-i),u=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*c,t[10]=(s+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*u,t[15]=0,t},p.perspective=function(t,e,n,i,r){var o=1/Math.tan(e/2),s=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*s,t[15]=0,t},p.ortho=function(t,e,n,i,r,o,s){var a=1/(e-n),c=1/(i-r),u=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*c,t[14]=(s+o)*u,t[15]=1,t},p.lookAt=function(t,n,i,r){var o,s,a,c,u,h,l,f,d,m,y=n[0],g=n[1],v=n[2],w=r[0],b=r[1],B=r[2],x=i[0],M=i[1],_=i[2];return Math.abs(y-x)<e&&Math.abs(g-M)<e&&Math.abs(v-_)<e?p.identity(t):(l=y-x,f=g-M,d=v-_,m=1/Math.sqrt(l*l+f*f+d*d),l*=m,f*=m,d*=m,o=b*d-B*f,s=B*l-w*d,a=w*f-b*l,m=Math.sqrt(o*o+s*s+a*a),m?(m=1/m,o*=m,s*=m,a*=m):(o=0,s=0,a=0),c=f*a-d*s,u=d*o-l*a,h=l*s-f*o,m=Math.sqrt(c*c+u*u+h*h),m?(m=1/m,c*=m,u*=m,h*=m):(c=0,u=0,h=0),t[0]=o,t[1]=c,t[2]=l,t[3]=0,t[4]=s,t[5]=u,t[6]=f,t[7]=0,t[8]=a,t[9]=h,t[10]=d,t[11]=0,t[12]=-(o*y+s*g+a*v),t[13]=-(c*y+u*g+h*v),t[14]=-(l*y+f*g+d*v),t[15]=1,t)},p.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},p.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=p);var f={};f.create=function(){var t=new n(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},f.rotationTo=function(){var t=a.create(),e=a.fromValues(1,0,0),n=a.fromValues(0,1,0);return function(i,r,o){var s=a.dot(r,o);return-.999999>s?(a.cross(t,e,r),a.length(t)<1e-6&&a.cross(t,n,r),a.normalize(t,t),f.setAxisAngle(i,t,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(a.cross(t,r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+s,f.normalize(i,i))}}(),f.setAxes=function(){var t=l.create();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],f.normalize(e,f.fromMat3(e,t))}}(),f.clone=c.clone,f.fromValues=c.fromValues,f.copy=c.copy,f.set=c.set,f.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},f.setAxisAngle=function(t,e,n){n=.5*n;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t},f.add=c.add,f.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],c=n[1],u=n[2],h=n[3];return t[0]=i*h+s*a+r*u-o*c,t[1]=r*h+s*c+o*a-i*u,t[2]=o*h+s*u+i*c-r*a,t[3]=s*h-i*a-r*c-o*u,t},f.mul=f.multiply,f.scale=c.scale,f.rotateX=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);return t[0]=i*c+s*a,t[1]=r*c+o*a,t[2]=o*c-r*a,t[3]=s*c-i*a,t},f.rotateY=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);return t[0]=i*c-o*a,t[1]=r*c+s*a,t[2]=o*c+i*a,t[3]=s*c-r*a,t},f.rotateZ=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);return t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=o*c+s*a,t[3]=s*c-o*a,t},f.calculateW=function(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=-Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t},f.dot=c.dot,f.lerp=c.lerp,f.slerp=function(t,e,n,i){var r,o,s,a,c,u=e[0],h=e[1],l=e[2],p=e[3],f=n[0],d=n[1],m=n[2],y=n[3];return o=u*f+h*d+l*m+p*y,0>o&&(o=-o,f=-f,d=-d,m=-m,y=-y),1-o>1e-6?(r=Math.acos(o),s=Math.sin(r),a=Math.sin((1-i)*r)/s,c=Math.sin(i*r)/s):(a=1-i,c=i),t[0]=a*u+c*f,t[1]=a*h+c*d,t[2]=a*l+c*m,t[3]=a*p+c*y,t},f.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;return t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=o*a,t},f.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},f.length=c.length,f.len=f.length,f.squaredLength=c.squaredLength,f.sqrLen=f.squaredLength,f.normalize=c.normalize,f.fromMat3=function(t,e){var n,i=e[0]+e[4]+e[8];if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[7]-e[5])*n,t[1]=(e[2]-e[6])*n,t[2]=(e[3]-e[1])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*s+o]-e[3*o+s])*n,t[o]=(e[3*o+r]+e[3*r+o])*n,t[s]=(e[3*s+r]+e[3*r+s])*n}return t},f.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=f)}(e.exports)}(this)},{}],24:[function(t,e,n){(function(){var t=this,i=t._,r={},o=Array.prototype,s=Object.prototype,a=Function.prototype,c=o.push,u=o.slice,h=o.concat,l=s.toString,p=s.hasOwnProperty,f=o.forEach,d=o.map,m=o.reduce,y=o.reduceRight,g=o.filter,v=o.every,w=o.some,b=o.indexOf,B=o.lastIndexOf,x=Array.isArray,M=Object.keys,_=a.bind,C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=C),n._=C):t._=C,C.VERSION="1.4.4";var E=C.each=C.forEach=function(t,e,n){if(null!=t)if(f&&t.forEach===f)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(e.call(n,t[i],i,t)===r)return}else for(var s in t)if(C.has(t,s)&&e.call(n,t[s],s,t)===r)return};C.map=C.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(E(t,function(t,r,o){i[i.length]=e.call(n,t,r,o)}),i)};var D="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return i&&(e=C.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(E(t,function(t,o,s){r?n=e.call(i,n,t,o,s):(n=t,r=!0)}),!r)throw new TypeError(D);return n},C.reduceRight=C.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),y&&t.reduceRight===y)return i&&(e=C.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=C.keys(t);o=s.length}if(E(t,function(a,c,u){c=s?s[--o]:--o,r?n=e.call(i,n,t[c],c,u):(n=t[c],r=!0)}),!r)throw new TypeError(D);return n},C.find=C.detect=function(t,e,n){var i;return I(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},C.filter=C.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(E(t,function(t,r,o){e.call(n,t,r,o)&&(i[i.length]=t)}),i)},C.reject=function(t,e,n){return C.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},C.every=C.all=function(t,e,n){e||(e=C.identity);var i=!0;return null==t?i:v&&t.every===v?t.every(e,n):(E(t,function(t,o,s){return(i=i&&e.call(n,t,o,s))?void 0:r}),!!i)};var I=C.some=C.any=function(t,e,n){e||(e=C.identity);var i=!1;return null==t?i:w&&t.some===w?t.some(e,n):(E(t,function(t,o,s){return i||(i=e.call(n,t,o,s))?r:void 0}),!!i)};C.contains=C.include=function(t,e){return null==t?!1:b&&t.indexOf===b?-1!=t.indexOf(e):I(t,function(t){return t===e})},C.invoke=function(t,e){var n=u.call(arguments,2),i=C.isFunction(e);return C.map(t,function(t){return(i?e:t[e]).apply(t,n)})},C.pluck=function(t,e){return C.map(t,function(t){return t[e]})},C.where=function(t,e,n){return C.isEmpty(e)?n?null:[]:C[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},C.findWhere=function(t,e){return C.where(t,e,!0)},C.max=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&C.isEmpty(t))return-(1/0);var i={computed:-(1/0),value:-(1/0)};return E(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s>=i.computed&&(i={value:t,computed:s})}),i.value},C.min=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&C.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return E(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s<i.computed&&(i={value:t,computed:s})}),i.value},C.shuffle=function(t){var e,n=0,i=[];return E(t,function(t){e=C.random(n++),i[n-1]=i[e],i[e]=t}),i};var k=function(t){return C.isFunction(t)?t:function(e){return e[t]}};C.sortBy=function(t,e,n){var i=k(e);return C.pluck(C.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var S=function(t,e,n,i){var r={},o=k(e||C.identity);return E(t,function(e,s){var a=o.call(n,e,s,t);i(r,a,e)}),r};C.groupBy=function(t,e,n){return S(t,e,n,function(t,e,n){(C.has(t,e)?t[e]:t[e]=[]).push(n)})},C.countBy=function(t,e,n){return S(t,e,n,function(t,e){C.has(t,e)||(t[e]=0),t[e]++})},C.sortedIndex=function(t,e,n,i){n=null==n?C.identity:k(n);for(var r=n.call(i,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(i,t[a])<r?o=a+1:s=a}return o},C.toArray=function(t){return t?C.isArray(t)?u.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,n){return null!=t?null==e||n?t[0]:u.call(t,0,e):void 0},C.initial=function(t,e,n){return u.call(t,0,t.length-(null==e||n?1:e))},C.last=function(t,e,n){return null!=t?null==e||n?t[t.length-1]:u.call(t,Math.max(t.length-e,0)):void 0},C.rest=C.tail=C.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var P=function(t,e,n){return E(t,function(t){C.isArray(t)?e?c.apply(n,t):P(t,e,n):n.push(t)}),n};C.flatten=function(t,e){return P(t,e,[])},C.without=function(t){return C.difference(t,u.call(arguments,1))},C.uniq=C.unique=function(t,e,n,i){C.isFunction(e)&&(i=n,n=e,e=!1);var r=n?C.map(t,n,i):t,o=[],s=[];return E(r,function(n,i){(e?i&&s[s.length-1]===n:C.contains(s,n))||(s.push(n),o.push(t[i]))}),o},C.union=function(){return C.uniq(h.apply(o,arguments))},C.intersection=function(t){var e=u.call(arguments,1);return C.filter(C.uniq(t),function(t){return C.every(e,function(e){return C.indexOf(e,t)>=0})})},C.difference=function(t){var e=h.apply(o,u.call(arguments,1));return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){for(var t=u.call(arguments),e=C.max(C.pluck(t,"length")),n=new Array(e),i=0;e>i;i++)n[i]=C.pluck(t,""+i);return n},C.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},C.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=C.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(b&&t.indexOf===b)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},C.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(B&&t.lastIndexOf===B)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},C.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);i>r;)o[r++]=t,t+=n;return o},C.bind=function(t,e){if(t.bind===_&&_)return _.apply(t,u.call(arguments,1));var n=u.call(arguments,2);return function(){return t.apply(e,n.concat(u.call(arguments)))}},C.partial=function(t){var e=u.call(arguments,1);return function(){return t.apply(this,e.concat(u.call(arguments)))}},C.bindAll=function(t){var e=u.call(arguments,1);return 0===e.length&&(e=C.functions(t)),E(e,function(e){t[e]=C.bind(t[e],t)}),t},C.memoize=function(t,e){var n={};return e||(e=C.identity),function(){var i=e.apply(this,arguments);return C.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},C.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(u.call(arguments,1)))},C.throttle=function(t,e){var n,i,r,o,s=0,a=function(){s=new Date,r=null,o=t.apply(n,i)};return function(){var c=new Date,u=e-(c-s);return n=this,i=arguments,0>=u?(clearTimeout(r),r=null,s=c,o=t.apply(n,i)):r||(r=setTimeout(a,u)),o}},C.debounce=function(t,e,n){var i,r;return function(){var o=this,s=arguments,a=function(){i=null,n||(r=t.apply(o,s))},c=n&&!i;return clearTimeout(i),i=setTimeout(a,e),c&&(r=t.apply(o,s)),r}},C.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},C.wrap=function(t,e){return function(){var n=[t];return c.apply(n,arguments),e.apply(this,n)}},C.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},C.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},C.keys=M||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)C.has(t,n)&&(e[e.length]=n);return e},C.values=function(t){var e=[];for(var n in t)C.has(t,n)&&e.push(t[n]);return e},C.pairs=function(t){var e=[];for(var n in t)C.has(t,n)&&e.push([n,t[n]]);return e},C.invert=function(t){var e={};for(var n in t)C.has(t,n)&&(e[t[n]]=n);return e},C.functions=C.methods=function(t){var e=[];for(var n in t)C.isFunction(t[n])&&e.push(n);return e.sort()},C.extend=function(t){return E(u.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},C.pick=function(t){var e={},n=h.apply(o,u.call(arguments,1));return E(n,function(n){n in t&&(e[n]=t[n])}),e},C.omit=function(t){var e={},n=h.apply(o,u.call(arguments,1));for(var i in t)C.contains(n,i)||(e[i]=t[i]);return e},C.defaults=function(t){return E(u.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var A=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var r=l.call(t);if(r!=l.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;n.push(t),i.push(e);var s=0,a=!0;if("[object Array]"==r){if(s=t.length,a=s==e.length)for(;s--&&(a=A(t[s],e[s],n,i)););}else{var c=t.constructor,u=e.constructor;if(c!==u&&!(C.isFunction(c)&&c instanceof c&&C.isFunction(u)&&u instanceof u))return!1;for(var h in t)if(C.has(t,h)&&(s++,!(a=C.has(e,h)&&A(t[h],e[h],n,i))))break;if(a){for(h in e)if(C.has(e,h)&&!s--)break;a=!s}}return n.pop(),i.pop(),a};C.isEqual=function(t,e){return A(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=x||function(t){return"[object Array]"==l.call(t)},C.isObject=function(t){return t===Object(t)},E(["Arguments","Function","String","Number","Date","RegExp"],function(t){C["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(t){return"function"==typeof t}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return p.call(t,e)},C.noConflict=function(){return t._=i,this},C.identity=function(t){return t},C.times=function(t,e,n){for(var i=Array(t),r=0;t>r;r++)i[r]=e.call(n,r);return i},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=C.invert(F.escape);var z={escape:new RegExp("["+C.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(F.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(t){C[t]=function(e){return null==e?"":(""+e).replace(z[t],function(e){return F[t][e]})}}),C.result=function(t,e){if(null==t)return null;var n=t[e];return C.isFunction(n)?n.call(t):n},C.mixin=function(t){E(C.functions(t),function(e){var n=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),q.call(this,n.apply(C,t))}})};var L=0;C.uniqueId=function(t){var e=++L+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,T={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(t,e,n){var i;n=C.defaults({},n,C.templateSettings);var r=new RegExp([(n.escape||V).source,(n.interpolate||V).source,(n.evaluate||V).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,n,i,r,a){return s+=t.slice(o,a).replace(j,function(t){return"\\"+T[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,C);var c=function(t){return i.call(this,t,C)};return c.source="function("+(n.variable||"obj")+"){\n"+s+"}",c},C.chain=function(t){return C(t).chain()};var q=function(t){return this._chain?C(t).chain():t};C.mixin(C),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];C.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],q.call(this,n)}}),E(["concat","join","slice"],function(t){var e=o[t];C.prototype[t]=function(){return q.call(this,e.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],25:[function(t,e,n){"undefined"!=typeof window&&"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)}),Leap=t("../lib/index")},{"../lib/index":11}]},{},[25]),n("BB.LeapMotion",["./BB","../libs/leap-0.6.4","./BB.Vector2"],function(t,e,n){return t.Vector2=n,t.LeapMotion=function(){},t.LeapMotion.prototype.canvasX=0,t.LeapMotion.prototype.canvasY=0,t.LeapMotion.prototype.LeapGetXY=function(e){var n=new Leap.Controller;n.on("frame",function(n){if(n.pointables.length>0){var i=n.pointables[0],r=n.interactionBox,o=r.normalizePoint(i.stabilizedTipPosition,!0);t.LeapMotion.prototype.canvasX=e.width*o[0],t.LeapMotion.prototype.canvasY=e.height*(1-o[1])}}),n.connect()},t.LeapMotion}),n("BB.Particle2D",["./BB","./BB.Vector2"],function(t,e){"use strict";return t.Vector2=e,t.Particle2D=function(e){var n=e&&"number"==typeof e.x?e.x:0,i=e&&"number"==typeof e.y?e.y:0;if(this.position=e&&"object"==typeof e.position&&e.position instanceof t.Vector2?e.position:new t.Vector2(n,i),"undefined"!=typeof e.velocity&&"undefined"!=typeof e.heading||"undefined"!=typeof e.velocity&&"undefined"!=typeof e.speed)throw new Error("BB.Particle2D: either use heading/speed or velocity (can't initialize with both)");if("undefined"!=typeof e.velocity&&e.velocity instanceof t.Vector2)this.velocity=e.velocity;else{if(!("undefined"==typeof e.velocity||e.velocity instanceof t.Vector2))throw new Error("BB.Particle2D: velocity must be an instance of BB.Vector2");if("undefined"!=typeof e.speed||"undefined"!=typeof e.heading){if("undefined"!=typeof e.speed&&"number"!=typeof e.speed)throw new Error("BB.Particle2D: speed must be a number");if("undefined"!=typeof e.heading&&"number"!=typeof e.heading)throw new Error("BB.Particle2D: heading must be a number in radians");if("undefined"!=typeof e.heading&&"undefined"==typeof e.speed)throw new Error("BB.Particle2D: when setting a heading, a speed parameter is also required");if("undefined"!=typeof e.speed&&"undefined"==typeof e.heading)throw new Error("BB.Particle2D: when setting a speed, a heading parameter is also required");
this.velocity=new t.Vector2(0,0),this.velocity.x=Math.cos(e.heading)*e.speed,this.velocity.y=Math.sin(e.heading)*e.speed}else this.velocity=new t.Vector2(0,0)}if("undefined"!=typeof e.acceleration&&"undefined"!=typeof e.velocity||"undefined"!=typeof e.acceleration&&"undefined"!=typeof e.heading||"undefined"!=typeof e.acceleration&&"undefined"!=typeof e.speed)throw new Error("BB.Particle2D: acceleration shouldn't be initialized along with velocity or heading/speed, use one or the other");this.acceleration=e&&"object"==typeof e.acceleration&&e.acceleration instanceof t.Vector2?e.acceleration:new t.Vector2(0,0),this.mass=e&&"number"==typeof e.mass?e.mass:1,this.radius=e&&"number"==typeof e.radius?e.radius:0,this.friction=e&&"number"==typeof e.friction?e.friction:1,this.elasticity=e&&"number"==typeof e.elasticity?e.elasticity:.05,this.maxSpeed=e&&"number"==typeof e.maxSpeed?e.maxSpeed:100,this._springs=[],this._colliders=[],this._world={},this._gravitations=[]},Object.defineProperty(t.Particle2D.prototype,"heading",{get:function(){return Math.atan2(this.velocity.y,this.velocity.x)},set:function(t){this.velocity.x=Math.cos(t)*this.speed,this.velocity.y=Math.sin(t)*this.speed}}),Object.defineProperty(t.Particle2D.prototype,"speed",{get:function(){return Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.y*this.velocity.y)},set:function(t){this.velocity.x=Math.cos(this.heading)*t,this.velocity.y=Math.sin(this.heading)*t}}),t.Particle2D.prototype.gravitate=function(e,n){var i;if(e instanceof Array)for(var r=0;r<e.length;r++){var o=e[r];if("undefined"==typeof o)throw new Error("BB.Particle2D: gravitate array is empty");if(o instanceof t.Particle2D)this._gravitations.push({position:o.position,mass:o.mass});else if(o instanceof t.Vector2&&"number"==typeof n)i={position:o},this._gravitations.push({position:i.position,mass:n});else{if(o instanceof t.Vector2&&"number"!=typeof n)throw new Error("BB.Particle2D: gravitate array objects are missing a mass");if(!(o instanceof t.Vector2)){if("undefined"==typeof o.x||"undefined"==typeof o.y)throw new Error("BB.Particle2D: gravitate array items should be objects with x and y properties");if("undefined"==typeof n)throw new Error("BB.Particle2D: gravitate array objects are missing a mass");i={position:{x:o.x,y:o.y}},this._gravitations.push({position:i.position,mass:n})}}}else{if("undefined"==typeof e)throw new Error("BB.Particle2D: gravitate is missing arguments");if(e instanceof t.Particle2D)this._gravitations.push({position:e.position,mass:e.mass});else if(e instanceof t.Vector2&&"number"==typeof n)i={position:e},this._gravitations.push({position:i.position,mass:n});else{if(e instanceof t.Vector2&&"number"!=typeof n)throw new Error("BB.Particle2D: gravitate's second argument requires a number ( mass )");if(!(e instanceof t.Vector2)){if("undefined"==typeof e.x||"undefined"==typeof e.y)throw new Error("BB.Particle2D: gravitate argument should be an object with an x and y property");if("undefined"==typeof n)throw new Error("BB.Particle2D: gravitate's second argument requires a number ( mass )");i={position:{x:e.x,y:e.y}},this._gravitations.push({position:i.position,mass:n})}}}},t.Particle2D.prototype.spring=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++){var n=t[e];if("undefined"==typeof n)throw new Error("BB.Particle2D: spring array is empty, expecting config objects");if("object"!=typeof n||"undefined"===n.position||"undefined"==typeof n.k||"undefined"==typeof n.length)throw new Error("BB.Particle2D: spring array expecting config objects, with properies for position, length and k");if("number"!=typeof n.position.x||"number"!=typeof n.position.y)throw new Error("BB.Particle2D: spring array objects' positions should have x and y properties ( numbers )");if("number"!=typeof n.k)throw new Error("BB.Particle2D: spring array object's k properties should be numbers ( usually a float )");if("number"!=typeof n.length)throw new Error("BB.Particle2D: spring array object's length properties should be numbers ( usually a integers ");this._springs.push({position:n.position,k:n.k,length:n.length})}else{if("undefined"==typeof t)throw new Error("BB.Particle2D: spring is missing arguments");if("object"!=typeof t||"undefined"===t.position||"undefined"==typeof t.k||"undefined"==typeof t.length)throw new Error("BB.Particle2D: spring expecting a config object, with properies for position, length and k");if("number"!=typeof t.position.x||"number"!=typeof t.position.y)throw new Error("BB.Particle2D: config.position should have x and y properties ( numbers )");if("number"!=typeof t.k)throw new Error("BB.Particle2D: config.k property should be a number ( usually a float )");if("number"!=typeof t.length)throw new Error("BB.Particle2D: config.length property should be a number ( usually an integer )");this._springs.push({position:t.position,k:t.k,length:t.length})}},t.Particle2D.prototype.collide=function(t){if("undefined"==typeof t)throw new Error("BB.Particle2D: collide requires arguments to konw what to collide against");"undefined"!=typeof t.dampen&&(this._world.dampen=t.dampen),"undefined"!=typeof t.left&&(this._world.left=t.left),"undefined"!=typeof t.right&&(this._world.right=t.right),"undefined"!=typeof t.top&&(this._world.top=t.top),"undefined"!=typeof t.bottom&&(this._world.bottom=t.bottom);var e=0;if("undefined"!=typeof t.particles){if(!(t.particles instanceof Array))throw new Error("BB.Particle2D: collide: particles value expecting array of particles");for(e=0;e<t.particles.length;e++){if("undefined"==typeof t.particles[e].position.x)throw new Error("BB.Particle2D: collide: particles["+e+"] is missing a position.x");if("undefined"==typeof t.particles[e].position.y)throw new Error("BB.Particle2D: collide: particles["+e+"] is missing a position.y");if("undefined"==typeof t.particles[e].radius)throw new Error("BB.Particle2D: collide: particles["+e+"] is missing a radius");this._colliders=t.particles}}},t.Particle2D.prototype.update=function(){var e,n,i,r,o,s,a,c,u,h,l,p=0,f=new t.Vector2;for(p=0;p<this._gravitations.length;p++){var d=this._gravitations[p];e=d.position.x-this.position.x,n=d.position.y-this.position.y,c=e*e+n*n,a=Math.sqrt(c),h=d.mass/c,i=e/a*h,r=n/a*h,f.set(i,r),this.applyForce(f)}for(p=0;p<this._springs.length;p++){var m=this._springs[p];e=m.position.x-this.position.x,n=m.position.y-this.position.y,a=Math.sqrt(e*e+n*n),h=(a-m.length||0)*m.k,i=e/a*h,r=n/a*h,f.set(i,r),this.applyForce(f)}for(p=0;p<this._colliders.length;p++){var y=this._colliders[p];y!==this&&(e=y.position.x-this.position.x,n=y.position.y-this.position.y,a=Math.sqrt(e*e+n*n),u=y.radius+this.radius,u>a&&(l=Math.atan2(n,e),o=this.position.x+Math.cos(l)*u,s=this.position.y+Math.sin(l)*u,i=(o-y.position.x)*this.elasticity,r=(s-y.position.y)*this.elasticity,f.set(-i,-r),this.applyForce(f)))}"undefined"!=typeof this._world.left&&this.position.x-this.radius<this._world.left&&(this.position.x=this._world.left+this.radius,this.velocity.x=-this.velocity.x,this.velocity.x*=this._world.dampen||.7),"undefined"!=typeof this._world.right&&this.position.x+this.radius>this._world.right&&(this.position.x=this._world.right-this.radius,this.velocity.x=-this.velocity.x,this.velocity.x*=this._world.dampen||.7),"undefined"!=typeof this._world.top&&this.position.y-this.radius<this._world.top&&(this.position.y=this._world.top+this.radius,this.velocity.y=-this.velocity.y,this.velocity.y*=this._world.dampen||.7),"undefined"!=typeof this._world.bottom&&this.position.y+this.radius>this._world.bottom&&(this.position.y=this._world.bottom-this.radius,this.velocity.y=-this.velocity.y,this.velocity.y*=this._world.dampen||.7),this.velocity.multiplyScalar(this.friction),this.velocity.add(this.acceleration),this.velocity.length()>this.maxSpeed&&this.velocity.setLength(this.maxSpeed),this.position.add(this.velocity),this.acceleration.multiplyScalar(0),this._gravitations=[],this._springs=[],this._colliders=[]},t.Particle2D.prototype.applyForce=function(e){if("object"!=typeof e||!(e instanceof t.Vector2))throw new Error("BB.Particle2D.applyForce: force parameter must be present and an instance of BB.Vector2");return this.acceleration.add(e.clone().divideScalar(this.mass))},t.Particle2D}),n("BB.AudioBufferLoader",["./BB"],function(t){"use strict";return t.AudioBufferLoader=function(t,e){if(this.ctx=t.context,this.urls=t.paths,this.auto="undefined"!=typeof t.autoload?t.autoload:!0,this.onload=e,this._cnt=0,this.buffers=[],!t)throw new Error("BB.AudioBufferLoader: requires a config object");if(!(this.ctx instanceof AudioContext))throw new Error("BB.AudioBufferLoader: context should be an instance of AudioContext");if(!(this.urls instanceof Array))throw new Error("BB.AudioBufferLoader: paths should be an Array of paths");if("boolean"!=typeof this.auto)throw new Error("BB.AudioBufferLoader: autoload should be either true or false");this.auto===!0&&this.load()},t.AudioBufferLoader.prototype.loadbuffer=function(t,e){var n=this,i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){n.ctx.decodeAudioData(i.response,function(i){if(!i)throw new Error("BB.AudioBufferLoader: decodeAudioData: could not decode: "+t);n.buffers[e]=i,++n._cnt==n.urls.length&&"undefined"!=typeof n.onload&&n.onload(n.buffers)},function(t){throw new Error("BB.AudioBufferLoader: decodeAudioData:"+t)})},i.onerror=function(){throw new Error("BB.AudioBufferLoader: XHMHttpRequest")},i.send()},t.AudioBufferLoader.prototype.load=function(){for(var t=0;t<this.urls.length;t++)this.loadbuffer(this.urls[t],t)},t.AudioBufferLoader}),n("BB.AudioSampler",["./BB","./BB.AudioBufferLoader"],function(t,e){"use strict";return t.AudioBufferLoader=e,t.AudioSampler=function(t,e){if(this.ctx=t.context,this.dest=this.ctx.destination,this.auto="undefined"!=typeof t.autoload?t.autoload:!0,this.loaded=!1,this.onload=e,this.keys=[],this.paths=[],this.buffers={},this.loader=void 0,!t)throw new Error("BB.AudioSampler: requires a config object");if(!(this.ctx instanceof AudioContext))throw new Error("BB.AudioSampler: context should be an instance of AudioContext");if("boolean"!=typeof this.auto)throw new Error("BB.AudioSampler: autoload should be either true or false");for(var n in t)"context"!==n&&"autoload"!==n&&(this.keys.push(n),this.paths.push(t[n]));this.auto===!0&&this.load()},t.AudioSampler.prototype.load=function(){var e=this;this.loader=new t.AudioBufferLoader({context:this.ctx,autoload:this.auto,paths:this.paths},function(t){for(var n=0;n<t.length;n++)e.buffers[e.keys[n]]=t[n];e.loaded=!0,"undefined"!=typeof e.onload&&e.onload(e.buffers)})},t.AudioSampler.prototype.connect=function(t){this.dest=t},t.AudioSampler.prototype.play=function(t,e,n,i){if(!t||this.keys.indexOf(t)<0)throw new Error("BB.AudioSampler: "+t+" was not defined in constructor");var r=this.ctx.createBufferSource();r.buffer=this.buffers[t],r.connect(this.dest);var o="undefined"!=typeof e?e:0,s="undefined"!=typeof n?n:0,a="undefined"!=typeof i?i:r.buffer.duration;r.start(o,s,a)},t.AudioSampler}),n("BB.AudioAnalyser",["./BB"],function(t){"use strict";return t.AudioAnalyser=function(t){if(this.ctx=t.context,this.analyser=this.ctx.createAnalyser(),this.dest=this.ctx.destination,this.fftSize="undefined"!=typeof t.fftSize?t.fftSize:2048,this.smoothing="undefined"!=typeof t.smoothing?t.smoothing:.8,this.maxDecibels="undefined"!=typeof t.maxDecibels?t.maxDecibels:-30,this.minDecibels="undefined"!=typeof t.minDecibels?t.minDecibels:-90,this.analyser.fftSize=this.fftSize,this.analyser.smoothingTimeConstant=this.smoothing,this.analyser.maxDecibels=this.maxDecibels,this.analyser.minDecibels=this.minDecibels,this.freqByteData=new Uint8Array(this.analyser.frequencyBinCount),this.freqFloatData=new Float32Array(this.analyser.frequencyBinCount),this.timeByteData=new Uint8Array(this.analyser.frequencyBinCount),this.timeFloatData=new Float32Array(this.analyser.frequencyBinCount),!t)throw new Error("Analyser: requires a config object");if(!(this.ctx instanceof AudioContext))throw new Error("Analyser: context should be an instance of AudioContext");if(this.fftSize%2!==0||this.fftSize<32||this.fftSize>2048)throw new Error("Analyser: fftSize must be a multiple of 2 between 32 and 2048");this.analyser.connect(this.dest)},t.AudioAnalyser.prototype.connect=function(t,e,n){if(!(t instanceof AudioDestinationNode&&t instanceof AudioNode))throw new Error("Analyser: destination should be an instanceof AudioDestinationNode or AudioNode");this.dest=t,this.analyser.connect(this.dest,e,n)},t.AudioAnalyser.prototype.getByteFrequencyData=function(){return this.analyser.getByteFrequencyData(this.freqByteData),this.freqByteData},t.AudioAnalyser.prototype.getFloatFrequencyData=function(){return this.analyser.getFloatFrequencyData(this.freqFloatData),this.freqFloatData},t.AudioAnalyser.prototype.getByteTimeDomainData=function(){return this.analyser.getByteTimeDomainData(this.timeByteData),this.timeByteData},t.AudioAnalyser.prototype.getFloatTimeDomainData=function(){return this.analyser.getFloatTimeDomainData(this.timeFloatData),this.timeFloatData},t.AudioAnalyser.prototype.averageAmp=function(t){for(var e,n=0,i=t.length,r=0;i>r;r++)n+=t[r];return e=n/i},t.AudioAnalyser.prototype.getAmplitude=function(){return this.averageAmp(this.getByteFrequencyData())},t.AudioAnalyser}),n("BB.AudioStream",["./BB"],function(t){"use strict";return t.AudioStream=function(t){this.ctx=t.context,this.dest="undefined"!=typeof t.connect?t.connect:this.ctx.destination,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var e=this;if(navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(t){var n=e.ctx.createMediaStreamSource(t);n.connect(e.dest)},function(t){throw new Error("Stream: "+t)}):console.log("getUserMedia not supported"),!t)throw new Error("BufferLoader: requires a config object");if(!(this.ctx instanceof AudioContext))throw new Error("BufferLoader: context should be an instance of AudioContext")},t.AudioStream}),n("BB.BaseMidiInput",["./BB"],function(t){"use strict";return t.BaseMidiInput=function(t){if(this.channel=null,this.command=null,this.type=null,this.velocity=null,"number"==typeof t)this.note=t;else{if("object"!=typeof t)throw new Error("BB.BaseMidiInput: config parameter must be a number or object type");"number"==typeof t.channel&&(this.channel=t.channel),"number"==typeof t.command&&(this.command=t.command),"number"==typeof t.type&&(this.type=t.type),"number"==typeof t.velocity&&(this.velocity=t.velocity)}this.inputType="base",this.eventStack={change:[]}},t.BaseMidiInput.prototype.on=function(t,e){"change"===t&&this.eventStack.change.push(e)},t.BaseMidiInput}),n("BB.MidiInputButton",["./BB","./BB.BaseMidiInput"],function(t,e){"use strict";return t.BaseMidiInput=e,t.MidiInputButton=function(t){e.call(this,t),this.inputType="button",this.eventStack.down=[],this.eventStack.up=[]},t.MidiInputButton.prototype=Object.create(e.prototype),t.MidiInputButton.prototype.constructor=e,t.MidiInputButton.prototype.on=function(t,n){e.prototype.on.call(this,t,n),"down"===t?this.eventStack.down.push(n):"up"===t&&this.eventStack.up.push(n)},t.MidiInputButton}),n("BB.MidiInputKey",["./BB","./BB.BaseMidiInput"],function(t,e){"use strict";return t.BaseMidiInput=e,t.MidiInputKey=function(t){e.call(this,t),this.inputType="key"},t.MidiInputKey.prototype=Object.create(e.prototype),t.MidiInputKey.prototype.constructor=e,t.MidiInputKey}),n("BB.MidiInputKnob",["./BB","./BB.BaseMidiInput"],function(t,e){"use strict";return t.BaseMidiInput=e,t.MidiInputKnob=function(t){e.call(this,t),this.inputType="knob",this.eventStack.max=[],this.eventStack.min=[]},t.MidiInputKnob.prototype=Object.create(e.prototype),t.MidiInputKnob.prototype.constructor=e,t.MidiInputKnob.prototype.on=function(t,n){e.prototype.on.call(this,t,n),"min"===t?this.eventStack.min.push(n):"max"===t&&this.eventStack.max.push(n)},t.MidiInputKnob}),n("BB.MidiInputPad",["./BB","./BB.BaseMidiInput"],function(t,e){"use strict";return t.BaseMidiInput=e,t.MidiInputPad=function(t){e.call(this,t),this.inputType="pad"},t.MidiInputPad.prototype=Object.create(e.prototype),t.MidiInputPad.prototype.constructor=e,t.MidiInputPad}),n("BB.MidiInputSlider",["./BB","./BB.BaseMidiInput"],function(t,e){"use strict";return t.BaseMidiInput=e,t.MidiInputSlider=function(t){e.call(this,t),this.inputType="slider",this.eventStack.max=[],this.eventStack.min=[]},t.MidiInputSlider.prototype=Object.create(e.prototype),t.MidiInputSlider.prototype.constructor=e,t.MidiInputSlider.prototype.on=function(t,n){e.prototype.on.call(this,t,n),"min"===t?this.eventStack.min.push(n):"max"===t&&this.eventStack.max.push(n)},t.MidiInputSlider}),n("BB.MidiDevice",["./BB","./BB.BaseMidiInput","./BB.MidiInputButton","./BB.MidiInputKey","./BB.MidiInputKnob","./BB.MidiInputPad","./BB.MidiInputSlider"],function(t,e,n,i,r,o,s){"use strict";return t.BaseMidiInput=e,t.MidiInputButton=n,t.MidiInputKey=i,t.MidiInputKnob=r,t.MidiInputPad=o,t.MidiInputSlider=s,t.MidiDevice=function(e,n,i){function r(t){a.midiAccess=t;for(var e=a.midiAccess.inputs.values(),i=e.next();i&&!i.done;i=e.next())i.value.onmidimessage=s;a.midiAccess.onstatechange=o,n(t)}function o(t){var e=t.port,n=e.state,i=e.name,r=e.type;"connected"===n&&a._connectEvent?a._connectEvent(i,r,e):"disconnected"===n&&a._disconnectEvent&&a._disconnectEvent(i,r,e)}function s(t){var e=t.data,n=e[0]>>4,i=15&e[0],r=240&e[0],o=e[1],s=e[2];a._messageEvent&&a._messageEvent({command:n,channel:i,type:r,note:o,velocity:s},t);var u=0,h="key"+o;if(h in c){var l=null,p=null;for(u=0;u<c[h].length;u++)c[h][u][0].command===n&&c[h][u][0].channel===i&&(l=c[h][u][0],p=c[h][u][1]);null===l&&(l=c[h][0][0],p=c[h][0][1]),l.command=n,l.channel=i,l.type=r,l.velocity=s;var f=l.eventStack.change,d={};for(u=0;u<f.length;u++)d={velocity:s,channel:i,command:n,type:r,note:o},f[u](d,l.inputType,p);if("slider"==l.inputType||"knob"==l.inputType)if(127==s){var m=l.eventStack.max;for(u=0;u<m.length;u++)d={velocity:s,channel:i,command:n,type:r,note:o},m[u](d,l.inputType,p)}else if(0===s){var y=l.eventStack.min;for(u=0;u<y.length;u++)d={velocity:s,channel:i,command:n,type:r,note:o},y[u](d,l.inputType,p)}if("button"==l.inputType)if(127==s){var g=l.eventStack.down;for(u=0;u<g.length;u++)d={velocity:s,channel:i,command:n,type:r,note:o},g[u](d,l.inputType,p)}else if(0===s){var v=l.eventStack.up;for(u=0;u<v.length;u++)d={velocity:s,channel:i,command:n,type:r,note:o},v[u](d,l.inputType,p)}}}if("object"!=typeof e)throw new Error("BB.MidiDevice: midiMap parameter must be an object");if("function"!=typeof n)throw new Error("BB.MidiDevice: success parameter must be a function");if("function"!=typeof i)throw new Error("BB.MidiDevice: failure parameter must be a function");var a=this;this.inputs={sliders:[],knobs:[],buttons:[],pads:[],keys:[]},this.midiAccess=null,this._connectEvent=null,this._disconnectEvent=null,this._messageEvent=null;var c={},u=null,h=0,l=null,p=null;if("undefined"!=typeof e.sliders&&e.sliders instanceof Array)for(h=0;h<e.sliders.length;h++)u=new t.MidiInputSlider(e.sliders[h]),p="number"==typeof e.sliders[h]?e.sliders[h]:e.sliders[h].note,l="key"+p,"undefined"==typeof c[l]&&(c[l]=[]),c[l].push([u,h]),a.inputs.sliders.push(u);if("undefined"!=typeof e.knobs&&e.knobs instanceof Array)for(h=0;h<e.knobs.length;h++)u=new t.MidiInputKnob(e.knobs[h]),p="number"==typeof e.knobs[h]?e.knobs[h]:e.knobs[h].note,l="key"+p,"undefined"==typeof c[l]&&(c[l]=[]),c[l].push([u,h]),a.inputs.knobs.push(u);if("undefined"!=typeof e.buttons&&e.buttons instanceof Array)for(h=0;h<e.buttons.length;h++)u=new t.MidiInputButton(e.buttons[h]),p="number"==typeof e.buttons[h]?e.buttons[h]:e.buttons[h].note,l="key"+p,"undefined"==typeof c[l]&&(c[l]=[]),c[l].push([u,h]),a.inputs.buttons.push(u);if("undefined"!=typeof e.pads&&e.pads instanceof Array)for(h=0;h<e.pads.length;h++)u=new t.MidiInputPad(e.pads[h]),p="number"==typeof e.pads[h]?e.pads[h]:e.pads[h].note,l="key"+p,"undefined"==typeof c[l]&&(c[l]=[]),c[l].push([u,h]),a.inputs.pads.push(u);if("undefined"!=typeof e.keys&&e.keys instanceof Array)for(h=0;h<e.keys.length;h++)u=new t.MidiInputKey(e.keys[h]),p="number"==typeof e.keys[h]?e.keys[h]:e.keys[h].note,l="key"+p,"undefined"==typeof c[l]&&(c[l]=[]),c[l].push([u,h]),a.inputs.keys.push(u);navigator.requestMIDIAccess?navigator.requestMIDIAccess({sysex:!1}).then(r,i):i()},t.MidiDevice.prototype.on=function(t,e){if("string"!=typeof t)throw new Error("BB.MidiDevice.on: name parameter must be a string type");if("function"!=typeof e)throw new Error("BB.MidiDevice.on: callback parameter must be a function type");if("connect"===t)this._connectEvent=e;else if("disconnect"===t)this._disconnectEvent=e;else{if("message"!==t)throw new Error("BB.MidiDevice.on: "+t+" is not a valid event name");this._messageEvent=e}},t.MidiDevice}),n("main",["require","BB","BB.MathUtils","BB.Color","BB.BaseBrush2D","BB.ImageBrush2D","BB.LineBrush2D","BB.BrushManager2D","BB.MouseInput","BB.Pointer","BB.LeapMotion","BB.Vector2","BB.Particle2D","BB.AudioBufferLoader","BB.AudioSampler","BB.AudioAnalyser","BB.AudioStream","BB.MidiDevice","BB.BaseMidiInput","BB.MidiInputKnob","BB.MidiInputSlider","BB.MidiInputButton","BB.MidiInputKey","BB.MidiInputPad"],function(t){"use strict";var e=t("BB");return e.MathUtils=t("BB.MathUtils"),e.Color=t("BB.Color"),e.BaseBrush2D=t("BB.BaseBrush2D"),e.ImageBrush2D=t("BB.ImageBrush2D"),e.LineBrush2D=t("BB.LineBrush2D"),e.BrushManager2D=t("BB.BrushManager2D"),e.MouseInput=t("BB.MouseInput"),e.Pointer=t("BB.Pointer"),e.LeapMotion=t("BB.LeapMotion"),e.Vector2=t("BB.Vector2"),e.Particle2D=t("BB.Particle2D"),e.AudioBufferLoader=t("BB.AudioBufferLoader"),e.AudioSampler=t("BB.AudioSampler"),e.AudioAnalyser=t("BB.AudioAnalyser"),e.AudioStream=t("BB.AudioStream"),e.MidiDevice=t("BB.MidiDevice"),e.BaseMidiInput=t("BB.BaseMidiInput"),e.MidiInputKnob=t("BB.MidiInputKnob"),e.MidiInputSlider=t("BB.MidiInputSlider"),e.MidiInputButton=t("BB.MidiInputButton"),e.MidiInputKey=t("BB.MidiInputKey"),e.MidiInputPad=t("BB.MidiInputPad"),e}),e("main")});